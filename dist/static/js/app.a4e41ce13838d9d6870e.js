webpackJsonp([1],{"+G/9":function(e,t){},"/Lry":function(e,t){},"/Y+O":function(e,t){},"/YVU":function(e,t){},0:function(e,t){},1:function(e,t){},"20Sm":function(e,t){},"2FGS":function(e,t){},"2MLC":function(e,t){},"3pnz":function(e,t){},"3v7q":function(e,t){},"5K8l":function(e,t){},"6O8y":function(e,t){},"8s/7":function(e,t){},"956p":function(e,t){},"D+vE":function(e,t){},EhIu:function(e,t){},GsCm:function(e,t){},GyrU:function(e,t){},MgxH:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),n={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};var o=a("VU/8")({name:"App"},n,!1,function(e){a("MgxH")},null,null).exports,r=a("/ocq"),l=a("woOf"),s=a.n(l),c=new i.default,m={data:function(){return{collapse:!1,fullscreen:!1,name:"范克里夫",message:0}},computed:{username:function(){var e=localStorage.getItem("auth-username");return e||this.name}},methods:{handleCommand:function(e){"loginout"==e&&(localStorage.removeItem("auth-user-info"),this.$router.push("/login"))},collapseChage:function(){this.collapse=!this.collapse,c.$emit("collapse",this.collapse)},handleFullScreen:function(){var e=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreen=!this.fullscreen}},mounted:function(){document.body.clientWidth<1500&&this.collapseChage()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("div",{staticClass:"collapse-btn",on:{click:e.collapseChage}},[e.collapse?a("i",{staticClass:"el-icon-s-unfold"}):a("i",{staticClass:"el-icon-s-fold"})]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"header-right"},[a("div",{staticClass:"header-user-con"},[a("div",{staticClass:"btn-fullscreen",on:{click:e.handleFullScreen}},[a("el-tooltip",{attrs:{effect:"dark",content:e.fullscreen?"取消全屏":"全屏",placement:"bottom"}},[a("i",{staticClass:"el-icon-rank"})])],1),e._v(" "),a("div",{staticClass:"user-avator"}),e._v(" "),a("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n                      "+e._s(e.username)+"\n                      "),a("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"loginout"}},[e._v("退出登录")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo-container"},[t("div",{staticClass:"logo"},[this._v("logo")]),this._v(" "),t("span",[this._v("魏善庄养老后台")])])}]};var p={data:function(){return{collapse:!1}},props:["items"],computed:{onRoutes:function(){return this.$route.path}},created:function(){var e=this;c.$on("collapse",function(t){e.collapse=t,c.$emit("collapse-content",t)})}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar"},[a("el-menu",{staticClass:"sidebar-el-menu",attrs:{"default-active":e.onRoutes,collapse:e.collapse,"background-color":"#324157","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""}},[e._l(e.items,function(t){return[t.subs?[a("el-submenu",{key:t.index,attrs:{index:t.index}},[a("template",{slot:"title"},[a("i",{class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])]),e._v(" "),e._l(t.subs,function(t){return[t.subs?a("el-submenu",{key:t.index,attrs:{index:t.index,"default-active":e.onRoutes}},[a("template",{slot:"title"},[e._v(e._s(t.title))]),e._v(" "),e._l(t.subs,function(t,i){return a("el-menu-item",{key:i,attrs:{index:t.index}},[e._v(e._s(t.title))])})],2):a("el-menu-item",{key:t.index,attrs:{index:t.index}},[e._v(e._s(t.title))])]})],2)]:t.href?[a("el-menu-item",{key:t.index,attrs:{index:t.index}},[a("a",{staticClass:"menuitem-link",attrs:{target:"_blank",href:t.href}},[a("i",{class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])])]:[a("el-menu-item",{key:t.index,attrs:{index:t.index}},[a("i",{class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])]]})],2)],1)},staticRenderFns:[]};var f={data:function(){return{breadcrumb:[],tagsList:[],collapse:!1,movieHref:"",allMenuItems:[{index:"/",title:"首页",icon:"el-icon-s-home"},{index:"1",title:"APP管理",icon:"el-icon-mobile",subs:[{index:"/app/index-banner",title:"首页轮播图管理"},{index:"/app/service-banner",title:"服务轮播图管理"},{index:"/app/community-banner",title:"社区播图管理"},{index:"/community",title:"社区管理",subs:[{index:"/community/info",title:"社区信息列表"},{index:"/community/category",title:"社区分类"}]},{index:"/store",title:"商家管理",subs:[{index:"/store",title:"商家信息列表"},{index:"/store/category",title:"商家分类管理"}]},{index:"/comment",title:"评价管理",subs:[{index:"/comment/store",title:"商家评价管理"},{index:"/comment/community",title:"社区评价管理"}]},{index:"/care",title:"关怀管理",subs:[{index:"/care/template",title:"关怀管理"},{index:"/care/birthday",title:"生日祝福"}]},{index:"/health/commonSense",title:"健康常识"}]},{icon:"el-icon-user",index:"2",title:"用户管理",subs:[{index:"/user/children",title:"子女信息"},{index:"/village",title:"村庄管理"},{index:"/user/elders",title:"老人信息列表"},{index:"/user/elderFile",title:"老人档案"},{index:"/user/stage",title:"驿站管理"},{index:"/user/social-worker",title:"社工信息管理"},{index:"/user/doctor",title:"医生管理"}]},{index:"/statistics",title:"统计分析",icon:"el-icon-pie-chart"},{icon:"el-icon-service",title:"志愿者管理",index:"3",subs:[{index:"/volunteer/activity",title:"活动管理"},{index:"/volunteer/approval",title:"活动审核"}]},{icon:"el-icon-service",title:"呼叫中心",index:"/call/center"},{icon:"el-icon-tickets",title:"驿站监控",index:"/stage/monitor"},{icon:"el-icon-tickets",title:"电子围栏",index:"/electronic/fence"},{icon:"el-icon-document",title:"城市大脑",index:"/city/brain"},{icon:"el-icon-picture",title:"胸牌管理",index:"/chest/card"},{icon:"el-icon-setting",title:"系统管理",index:"10",subs:[{index:"/system/administration",title:"管理员"}]}]}},computed:{menuItems:function(){var e=s()([],this.allMenuItems);return e}},components:{vHead:a("VU/8")(m,d,!1,function(e){a("5K8l")},"data-v-7f9de274",null).exports,vSidebar:a("VU/8")(p,u,!1,function(e){a("EhIu")},null,null).exports},watch:{$route:function(e,t){this.processBreadcrumb(e.path)}},methods:{getRoleId:function(){return JSON.parse(localStorage.getItem("auth-user-info")).admin_permissions},processBreadcrumb:function(e){var t=this;this.breadcrumb=[],this.menuItems.forEach(function(a){if(a.subs&&a.subs.length)a.subs.forEach(function(i){if(i.subs&&i.subs.length)i.subs.forEach(function(n){if(n.index===e)return t.breadcrumb=[],void t.breadcrumb.push({icon:a.icon,title:a.title},{icon:i.icon,title:i.title},{icon:n.icon,title:n.title})});else if(i.index===e)return t.breadcrumb=[],void t.breadcrumb.push({icon:a.icon,title:a.title},{icon:i.icon,title:i.title})});else if(e==a.index)return t.breadcrumb=[],console.log("levelOne:",a.index),t.breadcrumb.push({icon:a.icon,title:a.title}),void console.log(t.breadcrumb)})}},created:function(){var e=this;c.$on("collapse-content",function(t){e.collapse=t}),c.$on("tags",function(t){for(var a=[],i=0,n=t.length;i<n;i++)t[i].name&&a.push(t[i].name);e.tagsList=a}),this.processBreadcrumb(this.$route.path)},mounted:function(){}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("v-head"),e._v(" "),a("v-sidebar",{attrs:{items:e.menuItems}}),e._v(" "),a("div",{staticClass:"content-box",class:{"content-collapse":e.collapse}},[a("div",{staticClass:"content"},[a("transition",{attrs:{name:"move",mode:"out-in"}},[a("keep-alive",{attrs:{include:e.tagsList}},[a("section",[a("div",{staticClass:"content"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.breadcrumb,function(t,i){return a("el-breadcrumb-item",{key:i},[a("i",{class:t.icon}),e._v(" "),a("span",[e._v(e._s(t.title))])])}),1)],1),e._v(" "),a("div",{class:{container:!e.$route.meta.noBorder}},[a("router-view")],1)])])])],1),e._v(" "),a("el-backtop",{attrs:{target:".content"}})],1)])],1)},staticRenderFns:[]},v=a("VU/8")(f,h,!1,null,null,null).exports,g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-container",attrs:{"body-style":"{width: '100%'}"}},[a("el-card",{staticClass:"box-card"},e._l(e.list,function(t){return a("div",{key:t.title,staticClass:"text item"},[a("div",{staticClass:"card-value"},[a("strong",[e._v(e._s(t.value))])]),e._v(" "),a("div",{staticClass:"card-title"},[e._v(e._s(t.title))])])}),0),e._v(" "),a("img",{staticClass:"pic",attrs:{src:"http://thumb.takefoto.cn/wp-content/uploads/2019/04/201904080619552096-680x448.jpg",alt:""}})],1)},staticRenderFns:[]};var b=a("VU/8")({name:"HelloWorld",data:function(){return{list:[{title:"今日派单数",value:50},{title:"今日完成服务数",value:50},{title:"本周派单数",value:200},{title:"本月派单数",value:800},{title:"本周呼叫数",value:300}]}}},g,!1,function(e){a("uym3")},"data-v-476cc721",null).exports,_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"error-page"},[e._m(0),e._v(" "),a("div",{staticClass:"error-desc"},[e._v("啊哦~ 你所访问的页面不存在")]),e._v(" "),a("div",{staticClass:"error-handle"},[a("router-link",{attrs:{to:"/"}},[a("el-button",{attrs:{type:"primary",size:"large"}},[e._v("返回首页")])],1),e._v(" "),a("el-button",{staticClass:"error-btn",attrs:{type:"primary",size:"large"},on:{click:e.goBack}},[e._v("返回上一页")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"error-code"},[this._v("4"),t("span",[this._v("0")]),this._v("4")])}]};var y=a("VU/8")({methods:{goBack:function(){this.$router.go(-1)}}},_,!1,function(e){a("2MLC")},"data-v-5815c69c",null).exports,k=a("mvHQ"),x=a.n(k),w={data:function(){return{param:{admin_name:"",admin_pwd:"",remenber:!1},rules:{admin_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],admin_pwd:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{submitForm:function(){var e=this;this.$refs.login.validate(function(t){if(console.log(e.param),!t)return e.$message.error("请输入账号和密码"),console.log("error submit!!"),!1;e.$http.post("/apis/manager/login",{userName:e.param.admin_name,password:e.param.admin_pwd}).then(function(t){e.$message.success("登录成功"),localStorage.setItem("auth-user-info",x()(t.data)),localStorage.setItem("auth-token",t.data.data.token),localStorage.setItem("auth-username",t.data.data.userName),e.$router.push("/")}).catch(function(e){console.log(e)})})}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-wrap"},[a("div",{staticClass:"ms-login"},[a("div",{staticClass:"ms-title"},[e._v("欢迎登录")]),e._v(" "),a("el-form",{ref:"login",staticClass:"ms-content",attrs:{model:e.param,rules:e.rules,"label-width":"0px"}},[a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{tabindex:"1",autofocus:"autofocus",placeholder:"请输入帐号"},model:{value:e.param.admin_name,callback:function(t){e.$set(e.param,"admin_name",t)},expression:"param.admin_name"}},[a("el-button",{attrs:{slot:"prepend",icon:"el-icon-user"},slot:"prepend"})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",tabindex:"2",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}},model:{value:e.param.admin_pwd,callback:function(t){e.$set(e.param,"admin_pwd",t)},expression:"param.admin_pwd"}},[a("el-button",{attrs:{slot:"prepend",icon:"el-icon-lock"},slot:"prepend"})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"remenber"}},[a("el-checkbox",{model:{value:e.param.remenber,callback:function(t){e.$set(e.param,"remenber",t)},expression:"param.remenber"}},[e._v("记住密码")])],1),e._v(" "),a("div",{staticClass:"login-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var S=a("VU/8")(w,$,!1,function(e){a("3v7q")},"data-v-cb9adaf2",null).exports,N={name:"SingleImageUpload",model:{prop:"imageUrl",event:"change"},data:function(){return{headers:{token:localStorage.getItem("auth-token")},imageData:""}},computed:{size:function(){return{width:(this.width||178)+"px",height:(this.height||178)+"px"}}},props:["imageUrl","width","height","tips"],watch:{imageUrl:function(){this.imageData=null}},methods:{handleAvatarSuccess:function(e,t){this.imageUrl=e.data,this.$emit("change",e.data)},handleAvatarError:function(e,t){this.$message.error("图片上传失败，服务端返回码："+e.status)},beforeAvatarUpload:function(e){e.type;var t=e.size/1024/1024<1;return t||this.$message.error("上传头像图片大小不能超过 1MB!"),t}},mounted:function(){}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{staticClass:"single-image-uploader",attrs:{action:"/apis/fileUpload","show-file-list":!1,headers:e.headers,accept:"image/*","on-success":e.handleAvatarSuccess,"on-error":e.handleAvatarError,"before-upload":e.beforeAvatarUpload}},[a("section",{style:e.size},[e.imageUrl?a("el-image",{staticClass:"avatar",attrs:{fit:"contain",src:e.imageData||"/images/"+e.imageUrl}}):a("i",{staticClass:"el-icon-plus single-image-uploader-icon"})],1),e._v(" "),a("div",{staticClass:"upload-tips",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tips||"只能上传jpg/jpeg/png/gif文件，且不超过1M。"))])])},staticRenderFns:[]};var L=a("VU/8")(N,C,!1,function(e){a("oI3x")},"data-v-cbd3aedc",null).exports,T=a("sYY+"),A=a.n(T),O='<h2 style="text-align: center;">请在这里输入标题</h2><p>&nbsp; &nbsp; &nbsp; 这是第一个自然段。请替换为您的内容。可以设置<span style="font-weight: bold;">黑体</span>、<span style="font-style: italic;">斜体</span>、<span style="text-decoration-line: underline;">下划线</span>及<span style="text-decoration-line: line-through;">删除线</span>。您还可以设置<span style="color: rgb(249, 150, 59);">字体颜色</span>、<span style="background-color: rgb(249, 150, 59);">背景色</span>等。支持插入emoji表情😄😄。</p><p><br></p><p>可以插入有序列表：</p><ol><li>有序列表项目</li><li>有序列表项目</li><li>有序列表项目</li></ol><p>可以插入无序列表：</p><ul><li>无序列表项目</li><li>无序列表项目</li><li>无序列表项目</li></ul><p>您可以在任何地方<a href="http://bing.com/" target="_blank">插入链接</a>。</p><p><br></p><p></p><p>还可以插入图片：</p><p style="text-align: center;"><img src="http://thumb.takefoto.cn/wp-content/uploads/2019/04/201904080619552096-680x448.jpg"></p>',M={name:"editor",data:function(){return{editor:null,info_:null,valued:!1}},model:{prop:"value",event:"change"},props:{value:{type:String,default:""},isClear:{type:Boolean,default:!1}},watch:{isClear:function(e){e&&(this.editor.txt.clear(),this.info_=null)},value:function(e){if(console.log(e),e!=this.info_){var t=!(e||"").replace(/<(\/)?[\w\s]+>/g,"");this.editor.txt.html(t?O:this.removeWordXml(e))}this.valued=!0}},mounted:function(){var e=this;this.setEditor(),this.editor.txt.html(this.value),setTimeout(function(){var t=!(e.value||"").replace(/<(\/)?[\w\s]+>/g,"");!e.valued&&t&&(e.editor.txt.html(O),e.valued=!0)},1e3)},methods:{getHtml:function(){console.log(this.editor.txt.html())},removeWordXml:function(e){var t=e;t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<\/?SPANYES[^>]*>/gi,"")).replace(/<(\w[^>]*)  class=([^|>]*)([^>]*)/gi,"<$1$3")).replace(/<(\w[^>]*)  style="([^"]*)"([^>]*)/gi,"<$1$3")).replace(/<(\w[^>]*)  lang=([^|>]*)([^>]*)/gi,"<$1$3")).replace(/<\\?\?xml[^>]*>/gi,"")).replace(/<\/?\w+:[^>]*>/gi,"")).replace(/&nbsp;/,"")).replace(/\n(\n)*( )*(\n)*\n/gi,"\n"),this.editor.txt.html(t)},setEditor:function(){var e=this;this.editor=new A.a(this.$refs.toolbar,this.$refs.editor),this.editor.customConfig.uploadImgShowBase64=!0,this.editor.customConfig.uploadImgServer="",this.editor.customConfig.uploadImgHeaders={},this.editor.customConfig.uploadFileName="",this.editor.customConfig.uploadImgMaxSize=5242880,this.editor.customConfig.uploadImgMaxLength=10,this.editor.customConfig.uploadImgTimeout=18e4,this.editor.customConfig.pasteFilterStyle=!1,this.editor.customConfig.fontNames=["黑体","宋体","仿宋_GB2312","楷体","隶书"],this.editor.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],this.editor.customConfig.uploadImgHooks={fail:function(e,t,a){},success:function(e,t,a){},timeout:function(e,t){},error:function(e,t){},customInsert:function(e,t,a){}},this.editor.customConfig.onchange=function(t){e.info_=t,e.$emit("change",e.info_)},this.editor.create()}}},z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"editor"},[t("div",{ref:"toolbar",staticClass:"toolbar"}),this._v(" "),t("div",{ref:"editor",staticClass:"text"})])},staticRenderFns:[]};var I=a("VU/8")(M,z,!1,function(e){a("rY/e")},null,null).exports,D={name:"ServiceBanner",components:{SingleImageUpload:L,Editor:I},data:function(){return{editorOption:{placeholder:""},tableData:[],page:{pageSize:10},editingRow:{},form:{id:"",name:"",pic:"",link:"",text:"",type:1,createTime:"",updateTime:""},editing:!1,isUpdate:!1,search:{},rules:{text:[{required:!0,message:"请输入轮播图内容描述",trigger:"blur"},{min:2,max:100,message:"长度在 2 到 100 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入轮播图链接地址",trigger:"blur"},{type:"url",message:"请输入有效的链接地址",trigger:"blur"}],pic:[{required:!0,message:"请上传轮播图片"}],name:[{required:!0,message:"请输入轮播图名称"}]}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={type:1}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此轮播图吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/banner/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={type:1}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get("/apis/banner/list",{params:s()({pageSize:10,pageNum:1,type:this.form.type},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list,t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/banner/AddOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(1),e.editing=!1})})}},mounted:function(){this.fetchList(1)}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{fit:"contain",src:"/images/"+e.row.pic}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"link",align:"center",label:"链接"}}),e._v(" "),a("el-table-column",{attrs:{prop:"text",align:"center",label:"文本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("el-input",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"pic"}},[a("single-image-upload",{attrs:{width:"400",height:"200"},model:{value:e.form.pic,callback:function(t){e.$set(e.form,"pic",t)},expression:"form.pic"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"链接",prop:"link"}},[a("el-input",{model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文本",prop:"text"}},[a("editor",{ref:"myTextEditor",attrs:{options:e.editorOption},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var R=a("VU/8")(D,U,!1,function(e){a("c4lA")},"data-v-4b6b1ccf",null).exports,F={name:"CommunityBanner",components:{SingleImageUpload:L,Editor:I},data:function(){return{editorOption:{placeholder:""},tableData:[],page:{pageSize:10},editingRow:{},form:{id:"",name:"",pic:"",link:"",text:"",type:2,createTime:"",updateTime:""},editing:!1,isUpdate:!1,search:{},rules:{text:[{required:!0,message:"请输入轮播图内容描述",trigger:"blur"},{min:2,max:100,message:"长度在 2 到 100 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入轮播图链接地址",trigger:"blur"},{type:"url",message:"请输入有效的链接地址",trigger:"blur"}],pic:[{required:!0,message:"请上传轮播图片"}],name:[{required:!0,message:"请输入轮播图名称"}]}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={type:2}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此轮播图吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/banner/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={type:2}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get("/apis/banner/list",{params:s()({pageSize:10,pageNum:1,type:this.form.type},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.roleId=e.form.roleName,e.$http.post("/apis/banner/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(1),e.editing=!1})})}},mounted:function(){this.fetchList(1)}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{fit:"contain",src:"/images/"+e.row.pic}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"link",align:"center",label:"链接"}}),e._v(" "),a("el-table-column",{attrs:{prop:"text",align:"center",label:"文本"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("el-input",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"pic"}},[a("single-image-upload",{attrs:{width:"400",height:"200"},model:{value:e.form.pic,callback:function(t){e.$set(e.form,"pic",t)},expression:"form.pic"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"链接",prop:"link"}},[a("el-input",{model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文本",prop:"text"}},[a("editor",{ref:"myTextEditor",attrs:{options:e.editorOption},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var B=a("VU/8")(F,E,!1,function(e){a("afqh")},"data-v-219196db",null).exports,P={name:"Administrator",data:function(){return{tableData:[],page:{pageSize:10},editingRow:{},form:{id:"",userName:"",roleName:0,roleId:0,adminPwd:"",isUpdateAdminPwd:null},search:{},fileList:[],editing:!1,isUpdate:!1}},methods:{getAuthUserId:function(){return JSON.parse(localStorage.getItem("auth-user-info")).id},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get("/apis/adminApi/manager/list",{params:s()({id:this.getAuthUserId(),pageSize:10,pageNum:1},this.search)},{params:this.search}).then(function(e){t.tableData=e.data.data.list.map(function(e){return e.admin_permissions=parseInt(e.admin_permissions),e}),t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum)})},add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此用户吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/admin/adminDel",{aid:e,id:t.getAuthUserId()}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={}}).catch(function(){})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.roleId=e.form.roleName,e.$http.post("/apis/adminApi/manager/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(),e.editing=!1})})},cancel:function(){this.editing=!1}},computed:{rules:function(){var e=[{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}];return this.isUpdate&&!this.form.isUpdateAdminPwd||e.push({required:!0,message:"请输入密码",trigger:"blur"}),{userName:[{required:!0,message:"请输入管理员名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],adminPwd:e}}},mounted:function(){this.fetchList()},watch:{editing:function(){this.$refs.form&&this.$refs.form.clearValidate()}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"帐号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",align:"center",label:"权限"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),e.isUpdate?a("el-form-item",[a("el-switch",{attrs:{"active-text":"修改密码","inactive-text":""},model:{value:e.form.isUpdateAdminPwd,callback:function(t){e.$set(e.form,"isUpdateAdminPwd",t)},expression:"form.isUpdateAdminPwd"}})],1):e._e(),e._v(" "),!e.isUpdate||e.form.isUpdateAdminPwd?a("el-form-item",{attrs:{label:"密码",prop:"admin_pwd"}},[a("el-input",{attrs:{type:"password","show-password":!0,placeholder:"请输入密码"},model:{value:e.form.adminPwd,callback:function(t){e.$set(e.form,"adminPwd",t)},expression:"form.adminPwd"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"admin_permissions"}},[a("el-select",{attrs:{clearable:!0,placeholder:"请选择"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}},[a("el-option",{attrs:{label:"超级管理员",value:0}}),e._v(" "),a("el-option",{attrs:{label:"子女",value:1}}),e._v(" "),a("el-option",{attrs:{label:"社工",value:2}}),e._v(" "),a("el-option",{attrs:{label:"医生",value:3}}),e._v(" "),a("el-option",{attrs:{label:"村干部",value:4}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var W=a("VU/8")(P,V,!1,function(e){a("956p")},"data-v-137de1ef",null).exports,q={name:"CommunityCategory",data:function(){return{tableData:[],editingRow:{},form:{id:"",name:""},editing:!1,isUpdate:!1,rules:{name:{required:!0,message:"请输入分类名称"}},page:{}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;console.log(e),this.$confirm("确定删除此分类吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/communityCategory/delete",{id:e},{params:{token:localStorage.getItem("auth-token")}}).then(function(e){t.$message({message:e.data.msg,type:"success"})}),t.fetchList(),t.editing=!1}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(){var e=this;this.$http.get("/apis/communityCategory/list",{params:{token:localStorage.getItem("auth-token"),test:12121}}).then(function(t){e.page.total=t.data.data.total,e.page.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.roleId=e.form.roleName,e.$http.post("/apis/communityCategory/addOrUpdate",e.form,{params:{token:localStorage.getItem("auth-token")}}).then(function(t){e.$message({message:t.data.msg||"操作成功",type:"success"}),e.form={},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList()}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var j=a("VU/8")(q,H,!1,function(e){a("/YVU")},"data-v-2e4640dc",null).exports,G={name:"Community",components:{SingleImageUpload:L,Editor:I},data:function(){return{editorOption:{placeholder:""},tableData:[],categoryOptions:[],page:{pageSize:10},editingRow:{},form:{id:"",title:"",categoryId:"",content:"",cover:""},editing:!1,isUpdate:!1,search:{},rules:{title:{required:!0,message:"请输入社区信息标题",trigger:"blur"}}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此信息吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/communityInfo/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get("/apis/communityInfo/list",{params:s()({pageSize:10,pageNum:1,token:localStorage.getItem("auth-token")},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},getCategoryOptions:function(){var e=this;this.$http.get("/apis/communityCategory/list",{params:s()({pageSize:10,pageNum:1,token:localStorage.getItem("auth-token")})}).then(function(t){e.categoryOptions=t.data.data.list})},onSubmit:function(){console.log(this.form)},getCategoryName:function(e,t,a){var i=this.categoryOptions.filter(function(e){if(console.log(e.id+"="+a),a==e.id)return!0});return i.length>=1?i[0].name:"未知"}},mounted:function(){this.fetchList(1),this.getCategoryOptions()}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",align:"center",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{label:"封面",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{fit:"contain",align:"center",src:"/images/"+e.row.cover}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-tooltip-when-overflow":!0,prop:"content",align:"center",label:"内容"}}),e._v(" "),a("el-table-column",{staticClass:"content",attrs:{prop:"category",align:"center",formatter:e.getCategoryName,width:"100",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.categoryId,callback:function(t){e.$set(e.form,"categoryId",t)},expression:"form.categoryId"}},e._l(this.categoryOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"cover"}},[a("single-image-upload",{attrs:{width:"400",height:"200"},model:{value:e.form.cover,callback:function(t){e.$set(e.form,"cover",t)},expression:"form.cover"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("editor",{ref:"myTextEditor",attrs:{options:e.editorOption},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var J=a("VU/8")(G,Y,!1,function(e){a("dRa4")},"data-v-7f15b60a",null).exports,K={name:"CommunityCategory",data:function(){return{tableData:[],editingRow:{},form:{id:"",name:""},page:{},editing:!1,isUpdate:!1,rules:{name:{required:!0,message:"请输入分类名称",trigger:"blur"}}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此分类吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/storeCategory/delete",{id:e},{params:{token:localStorage.getItem("auth-token")}}).then(function(e){t.$message({message:e.data.msg||"操作成功",type:"success"}),t.fetchList()}),t.editing=!1,t.form={type:1}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(){var e=this;this.$http.get("/apis/storeCategory/list",{params:{token:localStorage.getItem("auth-token")}}).then(function(t){e.page.total=t.data.data.total,e.page.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/storeCategory/addOrUpdate",e.form,{params:{token:localStorage.getItem("auth-token")}}).then(function(t){e.$message({message:t.data.msg||"操作成功",type:"success"}),e.form={},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList()}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var Q=a("VU/8")(K,X,!1,function(e){a("GyrU")},"data-v-d02ab7b8",null).exports,Z={name:"MultipleImageUpload",props:["fileList","addFile","removeFileList"],data:function(){return{}},methods:{handleRemove:function(e,t){this.removeFileList(e)},handlePreview:function(e){console.log(e),this.addFile(e)},handleSuccess:function(e,t,a){this.addFile(a)}}},ee={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-upload",{staticClass:"single-image-uploader",attrs:{action:"/apis/adminApi/fileUpload","on-preview":this.handlePreview,"on-remove":this.handleRemove,"file-list":this.fileList,"on-success":this.handleSuccess,"list-type":"picture-card"}},[t("el-button",{attrs:{size:"small",type:"primary"}},[this._v("点击上传")]),this._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[this._v("只能上传jpg/png文件，且不超过1M")])],1)},staticRenderFns:[]},te=a("VU/8")(Z,ee,!1,null,null,null).exports,ae={name:"Community",components:{SingleImageUpload:L,Editor:I,MultipleImageUpload:te},data:function(){return{editorOption:{placeholder:""},tableData:[],categoryOptions:[],page:{pageSize:10},editingRow:{},introductionFileList:[],form:{id:"",name:"",mobile:"",address:"",businessHours:"",avatar:"",cover:"",discount:"",introduction:""},editing:!1,isUpdate:!1,search:{name:"",createTime:""},rules:{}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={},this.introductionFileList=[]},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e),this.introductionFileList=this.form.introduction},remove:function(e){var t=this;this.$confirm("确定删除此商家吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/store/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={}}).catch(function(){})},cancel:function(){this.editing=!1},addFile:function(e){console.log(e),this.introductionFileList=e},removeFileList:function(e){console.log(e),this.introductionFileList.pop(e)},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get("/apis/adminApi/store/list",{params:s()({pageSize:10,pageNum:1},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(e.introductionFileList&&e.introductionFileList.length&&(e.form.introduction="",e.introductionFileList.forEach(function(t){console.log(t.url.toString()),e.isUpdate?e.form.introduction+=t.url.toString()+",":e.form.introduction+=t.response.data.toString()+","})),!t)return console.log("error submit!!"),!1;e.form.roleId=e.form.roleName,e.$http.post("/apis/adminApi/store/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(1),e.editing=!1})})}},mounted:function(){this.fetchList(1)}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家名称",prop:"name"}},[a("el-input",{model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchList}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"商家名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",width:"110px",align:"center",label:"商家电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",align:"center",label:"商家地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"businessHours",align:"center",label:"营业时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家电话",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家地址",prop:"address"}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业时间",prop:"businessHours"}},[a("el-input",{model:{value:e.form.businessHours,callback:function(t){e.$set(e.form,"businessHours",t)},expression:"form.businessHours"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("single-image-upload",{attrs:{width:"200",height:"100"},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠信息",prop:"discount"}},[a("el-input",{model:{value:e.form.discount,callback:function(t){e.$set(e.form,"discount",t)},expression:"form.discount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介",prop:"introduction"}},[a("multiple-image-upload",{attrs:{"file-list":e.introductionFileList,"add-file":e.addFile,"remove-file-list":e.removeFileList,width:"100",height:"100"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面图",prop:"cover"}},[a("single-image-upload",{attrs:{width:"400",height:"200"},model:{value:e.form.cover,callback:function(t){e.$set(e.form,"cover",t)},expression:"form.cover"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var ne=a("VU/8")(ae,ie,!1,function(e){a("Q7lB")},"data-v-3a26b6aa",null).exports,oe=a("/IwO"),re=a.n(oe),le={name:"Village",components:{Amap:re.a,lazyAMapApiLoaderInstance:oe.lazyAMapApiLoaderInstance},data:function(){return{center:[117.11,36.67],tableData:[],map:"",mapData:{anchor:"",size:"",origin:"",icon:""},markers:[],circle:"",circles:[],editingRow:{},form:{id:"",name:"",railRadius:10,secretaryId:"",secretaryName:"",secretaryMobile:"",cadreId:"",cadreName:"",cadreMobile:"",lng:"",lat:""},editing:!1,isUpdate:!1,rules:{},page:{},search:{}}},methods:{mapInit:function(){var e=this;re.a.initAMapApiLoader({key:"e026d6af144d5a75ed717f7c18f10fff",plugin:["AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType"],v:"1.4.4"}),oe.lazyAMapApiLoaderInstance.load().then(function(){e.map=new AMap.Map("container",{center:new AMap.LngLat(117.11,36.67),zoom:14}),e.map.on("mapmove",e.centerChanged),e.addMarker(),e.addCircle(),e.map.add(e.circle)})},add:function(){this.editing=!0,this.isUpdate=!1,this.form={railRadius:500},this.mapInit()},centerChanged:function(){this.form.lat=this.map.getCenter().lat,this.form.lng=this.map.getCenter().lng,this.clearMarker(),this.addMarker(),this.addCircle(),this.map.add(this.circle)},clearMarker:function(){if(this.markers){for(var e in this.markers)this.markers[e].setMap(null);this.markers.length=0}},addMarker:function(){var e=new AMap.CircleMarker({map:this.map,center:this.map.getCenter(),radius:"5px",fillColor:"#561a12",fillOpacity:"0.5",strokeWeight:1});this.markers.push(e)},radiusChanged:function(){this.circle.setRadius(parseInt(this.form.railRadius))},addCircle:function(){this.clearCircle(),this.circle=new AMap.Circle({center:new AMap.LngLat(this.map.getCenter().lng,this.map.getCenter().lat),radius:this.form.railRadius,strokeColor:"#F33",strokeOpacity:1,strokeWeight:3,fillColor:"#ee2200",fillOpacity:.35}),this.circles.push(this.circle)},clearCircle:function(){if(this.circles){for(var e in this.circles)this.circles[e].setMap(null);this.circles.length=0}},edit:function(e){var t=this;this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.$http.get("/apis/adminApi/village/detail",{params:{id:e.id}}).then(function(e){console.log(e.data.data),t.form=s()({},e.data.data),t.mapInit()})},railRadiusFormatter:function(e){return 0==e.isSetRailRadius?"未划分":"已划分"},remove:function(e){var t=this;this.$confirm("确定删除此村庄吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/userVillage/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList()}),t.editing=!1,t.form={type:1}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(){var e=this;this.$http.get("/apis/adminApi/village/list",this.search).then(function(t){e.page.total=t.data.data.total,e.search.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.roleId=e.form.roleName,e.$http.post("/apis/adminApi/village/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList()}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"村庄"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.railRadiusFormatter,prop:"isSetRailRadius",label:"电子围栏"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"村庄名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"村书记",prop:"secretaryName"}},[a("el-input",{model:{value:e.form.secretaryName,callback:function(t){e.$set(e.form,"secretaryName",t)},expression:"form.secretaryName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系方式",prop:"secretaryMobile"}},[a("el-input",{model:{value:e.form.secretaryMobile,callback:function(t){e.$set(e.form,"secretaryMobile",t)},expression:"form.secretaryMobile"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"村专干",prop:"cadreName"}},[a("el-input",{model:{value:e.form.cadreName,callback:function(t){e.$set(e.form,"cadreName",t)},expression:"form.cadreName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系方式",prop:"cadreMobile"}},[a("el-input",{model:{value:e.form.cadreMobile,callback:function(t){e.$set(e.form,"cadreMobile",t)},expression:"form.cadreMobile"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"电子围栏",prop:"railRadius"}},[a("el-input",{on:{change:e.radiusChanged},model:{value:e.form.railRadius,callback:function(t){e.$set(e.form,"railRadius",t)},expression:"form.railRadius"}})],1),e._v(" "),a("el-form-item",[a("div",{attrs:{id:"container"}})]),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.form.latitude,callback:function(t){e.$set(e.form,"latitude",t)},expression:"form.latitude"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.form.longitude,callback:function(t){e.$set(e.form,"longitude",t)},expression:"form.longitude"}}),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var ce=a("VU/8")(le,se,!1,function(e){a("jfdR")},"data-v-67a37dce",null).exports,me={name:"Store",components:{Editor:I},computed:{showApprovalButton:function(){return 1==this.editingRow.status}},data:function(){return{editorOption:{placeholder:""},tableData:[],categoryOptions:[],page:{pageSize:10},editingRow:{},introductionFileList:[],form:{id:"",userName:"",storeName:"",content:"",status:"",createTime:"",updateTime:"",approvedAt:"",rejectedAt:""},editing:!1,isUpdate:!1,search:{name:"",createTime:""},rules:{}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},showOperationButton:function(e){return 1==e},remove:function(e){var t=this;this.$confirm("确定删除此评论吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/storeComment/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get("/apis/adminApi/storeComment/list",{params:s()({pageSize:10,pageNum:1},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},operation:function(e,t){var a=this;this.$http.post("/apis/adminApi/storeComment/audit",{id:e,status:t}).then(function(e){a.$message({message:e.data.message,type:"success"}),a.fetchList(1)}),this.editing=!1,this.form={}}},mounted:function(){this.fetchList(1)}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"storeName",align:"center",label:"商家名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",align:"center","show-tooltip-when-overflow":!0,label:"评论内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"评论用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(){e.edit(t.row)}}},[e._v("详情")]),e._v(" "),e.showOperationButton(t.row.status)?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(){e.operation(t.row.id,1)}}},[e._v("通过")]):e._e(),e._v(" "),e.showOperationButton(t.row.status)?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(){e.operation(t.row.id,2)}}},[e._v("不通过")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"详情",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评价用户",prop:"userName"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家名称",prop:"storeName"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.storeName,callback:function(t){e.$set(e.form,"storeName",t)},expression:"form.storeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评论内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",disabled:!0},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",[e.showApprovalButton?a("el-button",{staticClass:"el-button--success",on:{click:function(t){return e.operation(e.form.id,1)}}},[e._v("通过")]):e._e(),e._v(" "),e.showApprovalButton?a("el-button",{staticClass:"el-button--danger",on:{click:function(t){return e.operation(e.form.id,2)}}},[e._v("不通过")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var pe=a("VU/8")(me,de,!1,function(e){a("GsCm")},"data-v-0f4f0b68",null).exports,ue={name:"Community",components:{Editor:I},computed:{showApprovalButton:function(){return 1==this.editingRow.status}},data:function(){return{editorOption:{placeholder:""},tableData:[],categoryOptions:[],page:{pageSize:10},editingRow:{},introductionFileList:[],form:{id:"",userName:"",title:"",content:"",status:"",createTime:"",updateTime:"",approvedAt:"",rejectedAt:""},editing:!1,isUpdate:!1,search:{name:"",createTime:""},rules:{}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},showOperationButton:function(e){return 0==e},remove:function(e){var t=this;this.$confirm("确定删除此评论吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/communityComment/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get("/apis/adminApi/communityComment/list",{params:s()({pageSize:10,pageNum:1},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},operation:function(e,t){var a=this;this.$http.post("/apis/adminApi/communityComment/audit",{id:e,status:t}).then(function(e){a.$message({message:e.data.message,type:"success"}),a.fetchList(1)}),this.editing=!1,this.form={}}},mounted:function(){this.fetchList(1)}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"name"}},[a("el-input",{attrs:{placeholder:"按标题搜索"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchList}},[e._v("搜索")])],1)],1)],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",align:"center",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",align:"center","show-tooltip-when-overflow":!0,label:"评论内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"评论用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(){e.edit(t.row)}}},[e._v("详情")]),e._v(" "),e.showOperationButton(t.row.status)?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(){e.operation(t.row.id,1)}}},[e._v("通过")]):e._e(),e._v(" "),e.showOperationButton(t.row.status)?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(){e.operation(t.row.id,2)}}},[e._v("不通过")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"详情",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评价用户",prop:"userName"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评论内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",disabled:!0},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",[e.showApprovalButton?a("el-button",{staticClass:"el-button--success",on:{click:function(t){return e.operation(e.form.id,1)}}},[e._v("通过")]):e._e(),e._v(" "),e.showApprovalButton?a("el-button",{staticClass:"el-button--danger",on:{click:function(t){return e.operation(e.form.id,2)}}},[e._v("不通过")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var he=a("VU/8")(ue,fe,!1,function(e){a("POom")},"data-v-208df690",null).exports,ve={name:"Template",data:function(){return{tableData:[],pushSettingOptions:[{value:1,label:"当天"},{value:2,label:"提前三天"}],editingRow:{},form:{id:"",name:"",content:"",alertSet:1,careDate:"",type:1},page:{},search:{},editing:!1,isUpdate:!1,rules:{}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={name:"",content:"",alertSet:1,careDate:"",type:1}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此模板吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/careInfo/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList()}),t.editing=!1,t.form={name:"",content:"",alertSet:1,careDate:"",type:1}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(){var e=this;this.$http.get("/apis/adminApi/careInfo/list",{params:{type:1}}).then(function(t){e.page.total=t.data.data.total,e.search.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/adminApi/careInfo/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={name:"",content:"",alertSet:1,careDate:"",type:1},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList()}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",align:"center",label:"文本"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"祝福内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"careDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.careDate,callback:function(t){e.$set(e.form,"careDate",t)},expression:"form.careDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推送设置",prop:"alertSet"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.alertSet,callback:function(t){e.$set(e.form,"alertSet",t)},expression:"form.alertSet"}},e._l(e.pushSettingOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var be=a("VU/8")(ve,ge,!1,function(e){a("gH79")},"data-v-3eec5f2f",null).exports,_e={name:"Template",data:function(){return{tableData:[],pushSettingOptions:[{value:1,label:"当天"},{value:2,label:"提前三天"}],editingRow:{},form:{id:"",name:"生日祝福",content:"",alertSet:1,careDate:"",type:2},editing:!1,isUpdate:!1,rules:{},page:{},search:{}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={name:"生日祝福",content:"",alertSet:1,careDate:"",type:2}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此模板吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/careBirthday/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList()}),t.editing=!1,t.form={type:1}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(){var e=this;this.$http.get("/apis/adminApi/careInfo/list",{params:{type:2}}).then(function(t){e.page.total=t.data.data.total,e.search.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.roleId=e.form.roleName,e.$http.post("/apis/adminApi/careInfo/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={name:"生日祝福",content:"",alertSet:1,careDate:"",type:2},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList()}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",align:"center",label:"文本"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"祝福内容",prop:"content"}},[a("el-input",{model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推送设置",prop:"alertSet"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.alertSet,callback:function(t){e.$set(e.form,"alertSet",t)},expression:"form.alertSet"}},e._l(e.pushSettingOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var ke=a("VU/8")(_e,ye,!1,function(e){a("20Sm")},"data-v-11467062",null).exports,xe={name:"CommonSense",components:{SingleImageUpload:L,Editor:I},data:function(){return{editorOption:{placeholder:""},tableData:[],page:{pageSize:10},search:{},editingRow:{},form:{id:"",name:"",content:"",pushSetting:1,date:""},editing:!1,isUpdate:!1,rules:{}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此健康知识吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/healthyKnowledge/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList()}),t.editing=!1,t.form={type:1}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(){var e=this;this.$http.get("/apis/adminApi/healthyKnowledge/list").then(function(t){e.page.total=t.data.data.total,e.search.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/adminApi/healthyKnowledge/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList()}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",align:"center",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{label:"封面图",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{fit:"contain",align:"center",src:"/images/"+e.row.cover}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"content",align:"center","show-tooltip-when-overflow":!0,label:"文本"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"title"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"cover"}},[a("single-image-upload",{attrs:{width:"400",height:"200"},model:{value:e.form.cover,callback:function(t){e.$set(e.form,"cover",t)},expression:"form.cover"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("editor",{ref:"myTextEditor",attrs:{options:e.editorOption},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var $e=a("VU/8")(xe,we,!1,function(e){a("UFHR")},"data-v-ba9ec6f0",null).exports,Se={name:"Children",components:{Editor:I},computed:{showApprovalButton:function(){return 1==this.editingRow.status},canInputEdit:function(){return"children"==this.activeName},currentListApi:function(){return"children"==this.activeName?this.childrenListApi:this.approvalListApi},dialogTitle:function(){return"children"==this.activeName?this.isUpdate?"编辑":"添加":"详情"}},data:function(){return{bindOldMan:{id:"",relation:""},bindCount:0,genderOptions:[{label:"男",value:1},{label:"女",value:2}],activeName:"children",childrenListApi:"/apis/adminApi/user/list?userType=1",approvalListApi:"/apis/adminApi/childApply/list",editorOption:{placeholder:""},tableData:[],categoryOptions:[],page:{pageSize:10},editingRow:{},introductionFileList:[],form:{id:"",name:"",homeAddress:"",sex:"",userType:1,mobile:"",createTime:"",idCardNumber:"",updateTime:"",oldManName:"",oldManIdCardNumber:"",relation:"",bindOldManList:[]},editing:!1,isUpdate:!1,search:{name:"",createTime:""},rules:{}}},methods:{removeOldMan:function(e){console.log(this.form.bindOldManList.indexOf(e)),this.form.bindOldManList.splice(this.form.bindOldManList.indexOf(e),1)},bindButton:function(){this.bindCount++},genderFormatter:function(e,t,a){return 1==e.sex?"男":"女"},tabSwitch:function(e,t){this.search={},this.fetchList(1)},add:function(){this.editing=!0,this.bindCount=0,this.isUpdate=!1,this.form={userType:1}},edit:function(e){var t=this;this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.$http.get("/apis/adminApi/user/detailForChild",{params:{id:e.id}}).then(function(e){console.log(e.data.data.bindOldManList),t.form=s()({},e.data.data)}),this.form.userType=1,this.bindCount=0},showOperationButton:function(e){return"approval"==this.activeName&&1==e},remove:function(e){var t=this;this.$confirm("确定删除此子女信息吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/user/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={userType:1},t.bindCount=0}).catch(function(){})},cancel:function(){this.editing=!1,this.bindCount=0},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get(this.currentListApi,{params:s()({pageSize:10,pageNum:1},this.search)},{params:this.search}).then(function(e){t.bindCount=0,t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},operation:function(e,t){var a=this;this.$http.post("/apis/adminApi/childApply/audit",{id:e,status:t}).then(function(e){a.$message({message:e.data.message,type:"success"}),a.fetchList(1)}),this.editing=!1},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/adminApi/user/addOrUpdateForChild",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={userType:1},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList(1)}},Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tabs",{on:{"tab-click":e.tabSwitch},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"信息列表",name:"children"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"审核列表",name:"approval"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:17}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"name"}},[a("el-input",{attrs:{placeholder:"按标题搜索"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchList}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},["children"==e.activeName?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")]):e._e()],1)])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),e._v(" "),"children"==e.activeName?a("el-table-column",{attrs:{prop:"gender",align:"center",formatter:e.genderFormatter,"show-tooltip-when-overflow":!0,label:"性别"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardNumber",align:"center",label:"身份证号"}}),e._v(" "),"approval"==e.activeName?a("el-table-column",{attrs:{prop:"relation",align:"center",label:"与老人关系"}}):e._e(),e._v(" "),"approval"==e.activeName?a("el-table-column",{attrs:{prop:"oldManName",align:"center",label:"老人姓名"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["approval"==e.activeName?a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(){e.edit(t.row)}}},[e._v("详情")]):e._e(),e._v(" "),e.showOperationButton(t.row.status)?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(){e.operation(t.row.id,1)}}},[e._v("通过")]):e._e(),e._v(" "),e.showOperationButton(t.row.status)?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(){e.operation(t.row.id,2)}}},[e._v("不通过")]):e._e(),e._v(" "),"children"==e.activeName?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"children"==e.activeName?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.dialogTitle,visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.genderOptions,function(t){return a("el-option",{key:t.value,attrs:{disabled:!e.canInputEdit,label:t.label,value:t.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{attrs:{disabled:!e.canInputEdit},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCardNumber"}},[a("el-input",{attrs:{disabled:!e.canInputEdit},model:{value:e.form.idCardNumber,callback:function(t){e.$set(e.form,"idCardNumber",t)},expression:"form.idCardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"家庭住址",prop:"homeAddress"}},[a("el-input",{attrs:{disabled:!e.canInputEdit},model:{value:e.form.homeAddress,callback:function(t){e.$set(e.form,"homeAddress",t)},expression:"form.homeAddress"}})],1),e._v(" "),e.canInputEdit?e._e():a("el-form-item",{attrs:{label:"老人姓名",prop:"oldManName"}},[a("el-input",{attrs:{disabled:!e.canInputEdit},model:{value:e.form.oldManName,callback:function(t){e.$set(e.form,"oldManName",t)},expression:"form.oldManName"}})],1),e._v(" "),e.canInputEdit?e._e():a("el-form-item",{attrs:{label:"老人身份证号",prop:"oldManIdCardNumber"}},[a("el-input",{attrs:{disabled:!e.canInputEdit},model:{value:e.form.oldManIdCardNumber,callback:function(t){e.$set(e.form,"oldManIdCardNumber",t)},expression:"form.oldManIdCardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定老人"}},[e.form.bindOldManList&&e.form.bindOldManList.length>0?a("section",e._l(e.form.bindOldManList,function(t){return a("el-tag",{key:t.id,attrs:{closable:!0},on:{close:function(a){return e.removeOldMan(t)}}},[e._v(e._s(t.name))])}),1):e._e(),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.bindButton}},[e._v("添加绑定")])],1),e._v(" "),e._l(e.bindCount,function(t){return e.bindCount>0&&"children"==e.activeName?a("section",{key:t,attrs:{label:t,value:t}},[a("el-form-item",{attrs:{label:"选择老人","label-width":"100px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.genderOptions,function(t){return a("el-option",{key:t.value,attrs:{disabled:!e.canInputEdit,label:t.label,value:t.value}})}),1),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.genderOptions,function(t){return a("el-option",{key:t.value,attrs:{disabled:!e.canInputEdit,label:t.label,value:t.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"亲属关系","label-width":"100px"}},[a("el-input",{style:{width:"20%"},model:{value:e.bindOldMan.relation,callback:function(t){e.$set(e.bindOldMan,"relation",t)},expression:"bindOldMan.relation"}})],1)],1):e._e()}),e._v(" "),a("el-form-item",["children"==e.activeName?a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]):e._e(),e._v(" "),e.showApprovalButton?a("el-button",{staticClass:"el-button--success",on:{click:function(t){return e.operation(e.form.id,1)}}},[e._v("通过")]):e._e(),e._v(" "),e.showApprovalButton?a("el-button",{staticClass:"el-button--danger",on:{click:function(t){return e.operation(e.form.id,2)}}},[e._v("不通过")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],2)],1)],1)]],2)},staticRenderFns:[]};var Ce=a("VU/8")(Se,Ne,!1,function(e){a("2FGS")},"data-v-7b289e2a",null).exports,Le={name:"Elders",components:{Editor:I,SingleImageUpload:L},computed:{showApprovalButton:function(){return 1==this.editingRow.status}},data:function(){return{childrenOptions:[],genderOptions:[{label:"男",value:1},{label:"女",value:2}],childMobile:"",childRelation:"父子",bindCount:0,tableData:[],page:{pageSize:10},editingRow:{},form:{id:"",name:"",age:"",sex:"",mobile:"",idCardNumber:"",nation:"",villageId:"",children:[],createTime:"",updateTime:""},editing:!1,isUpdate:!1,search:{name:"",createTime:"",mobile:""},rules:{},villageOptions:[]}},methods:{searchChildren:function(e,t){var a=this.childrenOptions,i=e?a.filter(this.createStateFilter(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(i)},500)},createStateFilter:function(e){return function(t){return console.log(t),0===t.name.toLowerCase().indexOf(e.toLowerCase())}},childSelected:function(e){var t=this.form.children.filter(this.bindChildrenFilter(e));console.log(t),t.length>0?this.$message({message:"已绑定",type:"error"}):this.form.children.push({id:e.id,name:e.name,relation:this.childRelation?this.childRelation:"母子"}),this.childMobile="",this.childRelation="母子"},bindChildrenFilter:function(e){return function(t){return t.id==e.id}},removeChild:function(e){console.log(this.form.children.indexOf(e)),this.form.children.splice(this.form.children.indexOf(e),1)},add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){var t=this;this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.$http.get("/apis/adminApi/oldMan/detail",{params:{id:e.id}}).then(function(e){t.form=s()({},e.data.data)})},bindButton:function(){this.bindCount++},genderFormatter:function(e,t,a){return 1==e.sex?"男":"女"},remove:function(e){var t=this;this.$confirm("确定删除此老人信息吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/oldMan/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={}}).catch(function(){})},cancel:function(){this.editing=!1},getVillageOptions:function(){var e=this;this.$http.get("/apis/adminApi/village/list",{params:{pageSize:100}}).then(function(t){e.villageOptions=t.data.data.list})},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get("/apis/adminApi/oldMan/list",{params:s()({pageSize:10,pageNum:1},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/adminApi/oldMan/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(),e.editing=!1})})},getChildrenOptions:function(){var e=this;this.$http.get("/apis/adminApi/user/list",{params:{userType:1,pageSize:5e3}}).then(function(t){e.childrenOptions=t.data.data.list})}},mounted:function(){this.fetchList(1),this.getVillageOptions(),this.getChildrenOptions()}},Te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"name"}},[a("el-input",{attrs:{placeholder:"姓名搜索"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"手机号搜索"},model:{value:e.search.mobile,callback:function(t){e.$set(e.search,"mobile",t)},expression:"search.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchList}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nation",align:"center",width:"80",label:"民族"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",width:"50",formatter:e.genderFormatter,align:"center",label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardNumber",align:"center",label:"身份证号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",width:"50",align:"center",label:"年龄"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"详情",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.genderOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"民族",prop:"nation"}},[a("el-input",{model:{value:e.form.nation,callback:function(t){e.$set(e.form,"nation",t)},expression:"form.nation"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"一寸照片",prop:"avatar"}},[a("single-image-upload",{attrs:{width:"150",height:"400"},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCardNumber"}},[a("el-input",{model:{value:e.form.idCardNumber,callback:function(t){e.$set(e.form,"idCardNumber",t)},expression:"form.idCardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在村庄",prop:"villageId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.villageId,callback:function(t){e.$set(e.form,"villageId",t)},expression:"form.villageId"}},e._l(e.villageOptions,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"家庭住址",prop:"homeAddress"}},[a("el-input",{model:{value:e.form.homeAddress,callback:function(t){e.$set(e.form,"homeAddress",t)},expression:"form.homeAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:""}},[a("el-button",[e._v("老人行动轨迹")])],1),e._v(" "),a("el-form-item",{attrs:{label:"已绑定子女",prop:""}},[e.form.children&&e.form.children.length>0?a("section",e._l(e.form.children,function(t){return a("el-tag",{key:t.id,attrs:{closable:!0},on:{close:function(a){return e.removeChild(t)}}},[e._v(e._s(t.name))])}),1):e._e(),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.bindButton}},[e._v("添加绑定")])],1),e._v(" "),e._l(e.bindCount,function(t){return e.bindCount>0?a("section",{key:t,attrs:{label:t,value:t}},[a("el-form-item",{attrs:{label:"子女","label-width":"100px"}},[a("el-autocomplete",{style:{width:"20%"},attrs:{"fetch-suggestions":e.searchChildren,placeholder:"子女手机号","value-key":"name",value:"id"},on:{select:e.childSelected},model:{value:e.childMobile,callback:function(t){e.childMobile=t},expression:"childMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关系"}},[a("el-input",{style:{width:"20%"},model:{value:e.childRelation,callback:function(t){e.childRelation=t},expression:"childRelation"}})],1)],1):e._e()}),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],2)],1)],1)]],2)},staticRenderFns:[]};var Ae=a("VU/8")(Le,Te,!1,function(e){a("/Y+O")},"data-v-10747057",null).exports,Oe={name:"ChestCard",data:function(){return{tableData:[],editing:!1,isUpdate:!1,rules:{},page:{},search:{},editingRow:{},form:{id:"",imei:"",oldManName:"",oldManMobile:"",phone1:"",phone2:"",phone3:"",whitePhones:""},pushSettingOptions:[{value:1,label:"五分钟"},{value:2,label:"三十分钟"},{value:3,label:"六十分钟"}]}},methods:{statusFormatter:function(e){return e.status&&e.status?"正常":"离线"},add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此胸牌吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/badge/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList()}),t.editing=!1,t.form={}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(){var e=this;this.$http.get("/apis/adminApi/badge/list",{params:s()({pageSize:10,pageNum:1},this.search)}).then(function(t){e.page.total=t.data.data.total,e.search.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.roleId=e.form.roleName,e.$http.post("/apis/adminApi/badge/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList()}},Me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"imei"}},[a("el-input",{attrs:{placeholder:"imei号"},model:{value:e.search.imei,callback:function(t){e.$set(e.search,"imei",t)},expression:"search.imei"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchList}},[e._v("搜索")])],1)],1),e._v(" "),a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"imei",align:"center",label:"设置imei号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",formatter:e.statusFormatter,label:"设备状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"90px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"imei号",prop:"imei"}},[a("el-input",{model:{value:e.form.imei,callback:function(t){e.$set(e.form,"imei",t)},expression:"form.imei"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"老人姓名",prop:"oldManName"}},[a("el-input",{model:{value:e.form.oldManName,callback:function(t){e.$set(e.form,"oldManName",t)},expression:"form.oldManName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"老人手机号",prop:"oldManMobile"}},[a("el-input",{model:{value:e.form.oldManMobile,callback:function(t){e.$set(e.form,"oldManMobile",t)},expression:"form.oldManMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"亲情号1",prop:"phone1"}},[a("el-input",{model:{value:e.form.phone1,callback:function(t){e.$set(e.form,"phone1",t)},expression:"form.phone1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"亲情号2",prop:"phone2"}},[a("el-input",{model:{value:e.form.phone2,callback:function(t){e.$set(e.form,"phone2",t)},expression:"form.phone2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"亲情号3",prop:"phone3"}},[a("el-input",{model:{value:e.form.phone3,callback:function(t){e.$set(e.form,"phone3",t)},expression:"form.phone3"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话白名单",prop:"whitePhones","aria-placeholder":"23432"}},[a("el-input",{attrs:{placeholder:'多个手机号使用英文格式逗号 "," 分割'},model:{value:e.form.whitePhones,callback:function(t){e.$set(e.form,"whitePhones",t)},expression:"form.whitePhones"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备统一定位上报时间","label-width":"180px",prop:"oldManMobile"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.oldManMobile,callback:function(t){e.$set(e.form,"oldManMobile",t)},expression:"form.oldManMobile"}},e._l(e.pushSettingOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var ze=a("VU/8")(Oe,Me,!1,function(e){a("O6e/")},"data-v-38b05ad0",null).exports,Ie={name:"ElderFile",components:{Editor:I,MultipleImageUpload:te},data:function(){return{editorOption:{placeholder:""},defaultProps:{children:"children",label:"label"},oldManInVillage:[{id:1,label:"刘家场村",children:[{id:4,label:"老人1"},{id:9,label:"老人2"},{id:10,label:"老人3"}]},{id:2,label:"李家场村",children:[{id:5,label:"老人4"},{id:6,label:"老人5"}]},{id:3,label:"杏花村",children:[{id:7,label:"老人6"},{id:8,label:"老人7"}]}],imgListArr:[],tableData:[],editing:!1,isUpdate:!1,rules:{},page:{},search:{},editingRow:{},leftForm:{oldManName:""},form:{id:"",oldManId:"",oldManName:"",type:"",content:"",imgs:"",imgListArr:[]},typeMap:[{value:1,label:"病例档案"},{value:2,label:"自测数据"},{value:3,label:"体检报告"},{value:4,label:"吃药提醒"}],filterText:"",typeFormatterMap:["未知","病例档案","自测数据","体检报告","吃药提醒"]}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},addFile:function(e){this.imgListArr=e},removeFileList:function(e){console.log(e),this.imgListArr.pop(e)},typeFormatter:function(e){return this.typeFormatterMap[e.type]},add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此老人档案吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/oldManArchives/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList()}),t.editing=!1,t.form={}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(){var e=this;this.search.createTime&&this.search.createTime.length>0&&(this.search.timeStart=this.search.createTime[0],this.search.timeEnd=this.search.createTime[1]),delete this.search.createTime,this.$http.get("/apis/adminApi/oldManArchives/list",{params:s()({pageSize:10,pageNum:1},this.search)}).then(function(t){e.page.total=t.data.data.total,e.search.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;if(e.imgListArr&&e.imgListArr.length>0){var a="";e.imgListArr.forEach(function(e){a+=e.response.data+","}),e.form.imgs=a}e.$http.post("/apis/adminApi/oldManArchives/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList()}},De={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{staticClass:"container",attrs:{span:5}},[a("section",[e._v("\n            魏善庄镇老人档案管理\n        ")]),e._v(" "),a("el-input",{attrs:{size:"mini",placeholder:"按姓名搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.oldManInVillage,props:e.defaultProps,"filter-node-method":e.filterNode,"default-expand-all":!0}})],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v(" ")]),e._v(" "),a("el-col",{staticClass:"container",attrs:{span:18}},[a("div",[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.type,callback:function(t){e.$set(e.search,"type",t)},expression:"search.type"}},e._l(e.typeMap,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchList}},[e._v("搜索")])],1)],1),e._v(" "),a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"oldManName",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addUserName",align:"center",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",align:"center",formatter:e.typeFormatter,label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"90px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"老人姓名",prop:"oldManName"}},[a("el-input",{model:{value:e.form.oldManName,callback:function(t){e.$set(e.form,"oldManName",t)},expression:"form.oldManName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"oldManMobile"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeMap,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("editor",{ref:"myTextEditor",attrs:{options:e.editorOption},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"imgListArr"}},[a("multiple-image-upload",{attrs:{"file-list":e.imgListArr,"add-file":e.addFile,"remove-file-list":e.removeFileList,width:"100",height:"100"},model:{value:e.form.imgList,callback:function(t){e.$set(e.form,"imgList",t)},expression:"form.imgList"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)])],1)},staticRenderFns:[]};var Ue=a("VU/8")(Ie,De,!1,function(e){a("tCKW")},"data-v-9cc010a8",null).exports,Re={name:"Stage",data:function(){return{tableData:[],editing:!1,isUpdate:!1,rules:{name:[{required:!0,message:"请输入驿站名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},page:{},search:{},editingRow:{},form:{id:"",name:"",contactNumber:"",manager:"",address:""}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此驿站吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/courierStation/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList()}),t.editing=!1,t.form={}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(){var e=this;this.$http.get("/apis/adminApi/courierStation/list",{params:s()({pageSize:10,pageNum:1},this.search)}).then(function(t){e.page.total=t.data.data.total,e.search.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.roleId=e.form.roleName,e.$http.post("/apis/adminApi/courierStation/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList()}},Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"驿站"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"90px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"驿站名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"老人姓名",prop:"oldManName"}},[a("el-input",{model:{value:e.form.oldManName,callback:function(t){e.$set(e.form,"oldManName",t)},expression:"form.oldManName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地理位置",prop:"address"}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"manager"}},[a("el-input",{model:{value:e.form.manager,callback:function(t){e.$set(e.form,"manager",t)},expression:"form.manager"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"contactNumber"}},[a("el-input",{model:{value:e.form.contactNumber,callback:function(t){e.$set(e.form,"contactNumber",t)},expression:"form.contactNumber"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var Ee=a("VU/8")(Re,Fe,!1,function(e){a("TqcE")},"data-v-46a264d8",null).exports,Be={name:"Doctor",data:function(){return{search:{name:"",mobile:"",createTime:""},form:{id:"",name:"",mobile:"",idCardNumber:"",sex:"",homeAddress:"",age:"",canLogin:"",userType:2},page:{pageSize:10},tableData:[],genderOptions:[{label:"男",value:1},{label:"女",value:2}],editingRow:{},editing:!1,isUpdate:!1,rules:{}}},methods:{genderFormatter:function(e,t,a){return 1==e.sex?"男":"女"},add:function(){this.editing=!0,this.isUpdate=!1,this.form={userType:2}},edit:function(e){var t=this;this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.$http.get("/apis/adminApi/user/detailForChild",{params:{id:e.id}}).then(function(e){console.log(e.data.data.bindOldManList),t.form=s()({},e.data.data)}),this.form.userType=3},remove:function(e){var t=this;this.$confirm("确定删除此医生信息吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/user/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={userType:2}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;this.search.pageNum=e||1,this.search=this.$common.searchParams(this.search),this.$http.get("/apis/adminApi/user/list",{params:s()({pageSize:10,userType:2},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/adminApi/user/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={userType:2},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList(1)}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"name"}},[a("el-input",{attrs:{placeholder:"按姓名搜索"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"按手机号搜索"},model:{value:e.search.mobile,callback:function(t){e.$set(e.search,"mobile",t)},expression:"search.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchList(1)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",align:"center",formatter:e.genderFormatter,"show-tooltip-when-overflow":!0,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardNumber",align:"center",label:"身份证号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.genderOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCardNumber"}},[a("el-input",{model:{value:e.form.idCardNumber,callback:function(t){e.$set(e.form,"idCardNumber",t)},expression:"form.idCardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"家庭住址",prop:"homeAddress"}},[a("el-input",{model:{value:e.form.homeAddress,callback:function(t){e.$set(e.form,"homeAddress",t)},expression:"form.homeAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限是否开启登录权限",prop:"homeAddress"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.canLogin,callback:function(t){e.$set(e.form,"canLogin",t)},expression:"form.canLogin"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.form.canLogin,callback:function(t){e.$set(e.form,"canLogin",t)},expression:"form.canLogin"}},[e._v("否")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var Ve=a("VU/8")(Be,Pe,!1,function(e){a("3pnz")},"data-v-851e5d98",null).exports,We={name:"SocialWorker",data:function(){return{search:{name:"",mobile:"",createTime:""},form:{id:"",name:"",mobile:"",idCardNumber:"",sex:"",homeAddress:"",age:"",canLogin:"",userType:3},page:{pageSize:10},tableData:[],genderOptions:[{label:"男",value:1},{label:"女",value:2}],editingRow:{},editing:!1,isUpdate:!1,rules:{}}},methods:{genderFormatter:function(e,t,a){return 1==e.sex?"男":"女"},add:function(){this.editing=!0,this.isUpdate=!1,this.form={userType:3}},edit:function(e){var t=this;this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.$http.get("/apis/adminApi/user/detailForChild",{params:{id:e.id}}).then(function(e){console.log(e.data.data.bindOldManList),t.form=s()({},e.data.data)}),this.form.userType=3},remove:function(e){var t=this;this.$confirm("确定删除此社工信息吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/user/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={userType:3}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;this.search.pageNum=e||1,this.search=this.$common.searchParams(this.search),this.$http.get("/apis/adminApi/user/list",{params:s()({pageSize:10,pageNum:this.search.pageNum,userType:3},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/adminApi/user/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={userType:1},e.fetchList(1),e.editing=!1})})}},mounted:function(){this.fetchList(1)}},qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"name"}},[a("el-input",{attrs:{placeholder:"按姓名搜索"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"按手机号搜索"},model:{value:e.search.mobile,callback:function(t){e.$set(e.search,"mobile",t)},expression:"search.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchList(1)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",align:"center",formatter:e.genderFormatter,"show-tooltip-when-overflow":!0,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardNumber",align:"center",label:"身份证号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.genderOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCardNumber"}},[a("el-input",{model:{value:e.form.idCardNumber,callback:function(t){e.$set(e.form,"idCardNumber",t)},expression:"form.idCardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"家庭住址",prop:"homeAddress"}},[a("el-input",{model:{value:e.form.homeAddress,callback:function(t){e.$set(e.form,"homeAddress",t)},expression:"form.homeAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限是否开启登录权限",prop:"homeAddress"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.canLogin,callback:function(t){e.$set(e.form,"canLogin",t)},expression:"form.canLogin"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.form.canLogin,callback:function(t){e.$set(e.form,"canLogin",t)},expression:"form.canLogin"}},[e._v("否")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var He=a("VU/8")(We,qe,!1,function(e){a("D+vE")},"data-v-53da83ca",null).exports,je=a("XLwt"),Ge=a.n(je),Ye={name:"AMap",components:{Amap:re.a,lazyAMapApiLoaderInstance:oe.lazyAMapApiLoaderInstance},props:["width","height","lng","lat","zoom","markers"],data:function(){return{map:""}},methods:{mapInit:function(){var e=this;re.a.initAMapApiLoader({key:"e026d6af144d5a75ed717f7c18f10fff",plugin:["AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.CircleMarker","AMap.Marker"],v:"1.4.4"}),oe.lazyAMapApiLoaderInstance.load().then(function(){if(e.map=new AMap.Map("a-map-container",{center:new AMap.LngLat(e.lng,e.lat),zoom:14}),e.map.on("mapmove",e.centerChanged),e.markers&&e.markers.length>0){e.markersInit(AMap);e.map.setFitView()}e.$emit("map-mounted",e.map)})},centerChanged:function(){},markersInit:function(e){var t=this,a=[];this.markers.forEach(function(i){a.push(new e.LngLat(i.lng,i.lat)),new e.CircleMarker({map:t.map,center:new e.LngLat(i.lng,i.lat),radius:10,strokeColor:"#4169E1",fillColor:"#4169E1",zIndex:55})});this.map.setFitView();var i=new e.Polyline({path:a,strokeColor:"#EEC900",fillColor:"#EEC900",lineCap:"round",lineJoin:"round",showDir:!0,strokeWeight:5});this.map.add([i])}},mounted:function(){this.zoom||(this.zoom=14),this.mapInit()}},Je={render:function(){var e=this.$createElement;return(this._self._c||e)("section",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"a-map-container"}})},staticRenderFns:[]};var Ke=a("VU/8")(Ye,Je,!1,function(e){a("8s/7")},"data-v-d3f46d58",null).exports,Xe={name:"Chart",components:{Echart:Ge.a,AMap:Ke},data:function(){return{chartSos:"",cumulativeNumberOfCallsReceived:"",cumulativeCallTime:"",cumulativeDispatchedOrderNumber:"",cumulativeNumberOfCompletedWork:"",orderRate:"",monthlyTotalReception:"",weeklyServiceSummary:"",dataStatistics:"",summary:[{title:"老人数量",value:50,unit:"人"},{title:"医生数量",value:50,unit:"人"},{title:"驿工数量",value:200,unit:"人"},{title:"总注册子女用户数",value:800,unit:"人"},{title:"覆盖村庄数",value:300,unit:"个"},{title:"驿站数量",value:300,unit:"个"}],sosData:{title:{text:"SOS报警接口变化图"},xAxis:{data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00","24:00"]},xAxisDay:{data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00","24:00"]},xAxisWeek:{data:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"]},xAxisMonth:{data:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]},series:[{name:"报警数",type:"bar",data:[5,20,36,10,10,20,15,41,33]}],seriesDay:[{name:"报警数",type:"bar",data:[5,20,36,10,10,20,15,41,33]}],seriesWeek:[{name:"报警数",type:"bar",data:[25,20,36,10,15,41,33]}],seriesMonth:[{name:"销量",type:"bar",data:[11,22,13,24,15,26,37,28,19,40,31,22,13,34,45,26,17,28,39,20,31,12,23,34,15,56,17,28,49,30]}]}}},methods:{sos:function(e,t){var a=this;this.chartSos=Ge.a.init(document.getElementById("sos")),this.chartSos.hideLoading();var i={title:this.sosData.title,tooltip:{},xAxis:e,yAxis:{},series:t,toolbox:{show:!0,orient:"horizontal",itemSize:20,itemGap:20,feature:{myDay:{show:!0,title:"本日",icon:"image://https://image.flaticon.com/icons/svg/102/102571.svg",onclick:function(){a.switchSos("day")}},myWeek:{show:!0,title:"本周",icon:"image://https://image.flaticon.com/icons/svg/102/102571.svg",onclick:function(){a.switchSos("week")}},myMonth:{show:!0,title:"本月",icon:"image://https://image.flaticon.com/icons/svg/102/102571.svg",onclick:function(){a.switchSos("month")}}}}};this.chartSos.setOption(i)},serviceCommon:function(e,t,a){var i={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:t,type:"pie",radius:"60%",center:["50%","50%"],label:{position:"inner",verticalAlign:"top",offset:[40,50],fontSize:10,padding:[-60,0,0,0]},data:[{value:a,name:t}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.setOption(i)},cumulativeNumberOfCallsReceivedInit:function(){this.cumulativeNumberOfCallsReceived=Ge.a.init(document.getElementById("cumulative-number-of-calls-received")),this.cumulativeNumberOfCallsReceived.hideLoading(),this.serviceCommon(this.cumulativeNumberOfCallsReceived,"累计接听电话数",456)},cumulativeCallTimeInit:function(){this.cumulativeCallTime=Ge.a.init(document.getElementById("cumulative-call-time")),this.cumulativeCallTime.hideLoading(),this.serviceCommon(this.cumulativeCallTime,"累计接听电话时长",9891)},cumulativeDispatchedOrderNumberInit:function(){this.cumulativeDispatchedOrderNumber=Ge.a.init(document.getElementById("cumulative-dispatched-order-number")),this.cumulativeDispatchedOrderNumber.hideLoading(),this.serviceCommon(this.cumulativeDispatchedOrderNumber,"累计派单数",156)},cumulativeNumberOfCompletedWorkInit:function(){this.cumulativeNumberOfCompletedWork=Ge.a.init(document.getElementById("cumulative-number-of-completed-work")),this.cumulativeNumberOfCompletedWork.hideLoading(),this.serviceCommon(this.cumulativeNumberOfCompletedWork,"累计完成工单数",368)},monthlyTotalReceptionInit:function(){this.monthlyTotalReception=Ge.a.init(document.getElementById("monthly-total-reception")),this.monthlyTotalReception.hideLoading();this.monthlyTotalReception.setOption({title:{text:"本月累计接待总计",left:"center",subtext:"共计234人次"},xAxis:{type:"category",data:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290,1330,1320,820,932,901,934,1290,1330,1320,820,932,901,934,1290,1330,1320,820,932,901,934,1290,1330,1320,1212,3333],type:"line"}]})},weeklyServiceSummaryInit:function(){this.weeklyServiceSummary=Ge.a.init(document.getElementById("weekly-service-summary")),this.weeklyServiceSummary.hideLoading();this.weeklyServiceSummary.setOption({title:{text:"本周服务汇总",left:"center"},xAxis:{type:"category",data:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290,1330,1320],type:"bar"}]})},dataStatisticsInit:function(){this.dataStatistics=Ge.a.init(document.getElementById("data-statistics")),this.dataStatistics.hideLoading();this.dataStatistics.setOption({title:{text:"数据统计",left:"center",textStyle:{width:"100%"},rich:{width:"100%",textBorderWidth:"100%"}},backgroundColor:"#244566",tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",top:"bottom",data:["驿工","总接待电话数","老人","驿站数","医生","子女用户数","总工单数"],itemGap:20,textStyle:{color:"white"}},toolbox:{},series:[{name:"面积模式",type:"pie",radius:[30,110],center:["50%","50%"],roseType:"area",data:[{value:10,name:"驿工",itemStyle:{color:"#1E90FF"}},{value:5,name:"总接待电话数",itemStyle:{color:"#708090"}},{value:15,name:"老人",itemStyle:{color:"#32CD32"}},{value:25,name:"驿站数",itemStyle:{color:"#40E0D0"}},{value:20,name:"医生",itemStyle:{color:"#FF4500"}},{value:35,name:"子女用户数",itemStyle:{color:"#4169E1"}},{value:30,name:"总工单数",itemStyle:{color:"#838B8B"}}]}]})},orderRateInit:function(){this.orderRate=Ge.a.init(document.getElementById("order-rate")),this.orderRate.hideLoading();var e={title:{text:"医生工单 服务工单在总工单中占比"},legend:{orient:"vertical",bottom:"bottom",itemGap:30,formatter:{name:name},data:[{name:"医生工单"},{name:"服务工单"}]},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"工单",type:"pie",radius:"60%",center:["50%","50%"],label:{position:"inner",verticalAlign:"top",offset:[40,50],fontSize:10,padding:[-60,0,0,0]},data:[{value:159,name:"医生工单"},{value:236,name:"服务工单"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.orderRate.setOption(e)},switchSos:function(e){console.log(e),"day"==e?(this.sosData.series=this.sosData.seriesDay,this.sosData.xAxis=this.sosData.xAxisDay):"week"==e?(this.sosData.series=this.sosData.seriesWeek,this.sosData.xAxis=this.sosData.xAxisWeek):"month"==e?(this.sosData.series=this.sosData.seriesMonth,this.sosData.xAxis=this.sosData.xAxisMonth):(this.sosData.series=this.sosData.seriesDay,this.sosData.xAxis=this.sosData.xAxisDay),this.chartSos.setOption({xAxis:this.sosData.xAxis,yAxis:{},series:this.sosData.series})}},mounted:function(){this.sos(this.sosData.xAxisDay,this.sosData.seriesDay),this.cumulativeNumberOfCallsReceivedInit(),this.cumulativeCallTimeInit(),this.cumulativeDispatchedOrderNumberInit(),this.cumulativeNumberOfCompletedWorkInit(),this.orderRateInit(),this.monthlyTotalReceptionInit(),this.weeklyServiceSummaryInit(),this.dataStatisticsInit()}},Qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card home-container"},e._l(e.summary,function(t){return a("div",{key:t.title,staticClass:"item"},[a("div",{staticClass:"text card-value"},[a("strong",[e._v(e._s(t.value)+e._s(t.unit))])]),e._v(" "),a("div",{staticClass:"text card-title"},[e._v(e._s(t.title))])])}),0)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("section",{staticClass:"box-card",staticStyle:{width:"100%",height:"400px",padding:"20px 0px 20px 0px"},attrs:{id:"sos"}})]),e._v(" "),a("el-col",{attrs:{span:8}},[a("section",{staticClass:"chart-title"},[e._v("自2020-07-10来累计数据")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("section",{staticStyle:{width:"100%",height:"200px"},attrs:{id:"cumulative-number-of-calls-received"}},[e._v("累计接听电话数")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("section",{staticStyle:{width:"100%",height:"200px"},attrs:{id:"cumulative-call-time"}},[e._v("累计接听电话时长")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("section",{staticStyle:{width:"100%",height:"200px"},attrs:{id:"cumulative-dispatched-order-number"}},[e._v("累计派单数")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("section",{staticStyle:{width:"100%",height:"200px"},attrs:{id:"cumulative-number-of-completed-work"}},[e._v("累计完成工单数")])])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("section",[e._v("驿工平均接单时间")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("section",[e._v("驿工平均接单时间")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("section",{staticStyle:{width:"600px",height:"400px",padding:"20px 0px 20px 0px"},attrs:{id:"order-rate"}},[e._v("医生工单 服务工单在总工单中占比")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("section",{staticStyle:{padding:"20px 0px 20px 0px"}},[e._v("魏善庄镇行政地图")]),e._v(" "),a("a-map",{attrs:{width:100,lng:116.419461,lat:39.663952,height:200}})],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("section",{staticStyle:{width:"100%",height:"400px",padding:"20px 0px 20px 0px"},attrs:{id:"monthly-total-reception"}},[e._v("本月接待总计")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("section",{staticStyle:{width:"100%",height:"400px",padding:"20px 0px 20px 0px"},attrs:{id:"weekly-service-summary"}},[e._v("本周服务汇总")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("section",{staticStyle:{width:"100%",height:"400px",padding:"20px 0px 20px 0px"},attrs:{id:"data-statistics"}},[e._v("数据统计")])])],1)],1)},staticRenderFns:[]};var Ze=a("VU/8")(Xe,Qe,!1,function(e){a("dTDY")},"data-v-67b354b0",null).exports,et={name:"Activity",components:{SingleImageUpload:L,Editor:I},data:function(){return{tableData:[],editorOption:{placeholder:""},form:{id:"",title:"",content:"",cover:""},search:{},page:{pageSize:10},editing:!1,isUpdate:!1,rules:{}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此活动信息吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/volunteerActivity/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;console.log(e),this.search.pageNum=e||1,this.search=this.$common.searchParams(this.search),this.$http.get("/apis/adminApi/volunteerActivity/list",{params:s()({pageSize:10,pageNum:1},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/adminApi/volunteerActivity/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(1),e.editing=!1})})}},mounted:function(){this.fetchList(1)}},tt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchList(1)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{label:"宣传图",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{fit:"contain",src:"/images/"+e.row.cover}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",align:"center",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content","show-tooltip-when-overflow":!0,align:"center",label:"详情"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"详情",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动标题",prop:"title"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"宣传图",prop:"cover"}},[a("single-image-upload",{attrs:{width:"400",height:"200"},model:{value:e.form.cover,callback:function(t){e.$set(e.form,"cover",t)},expression:"form.cover"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动内容",prop:"content"}},[a("editor",{ref:"myTextEditor",attrs:{options:e.editorOption},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var at=a("VU/8")(et,tt,!1,function(e){a("boWN")},"data-v-1a6607c1",null).exports,it={name:"Approval",components:{Editor:I,SingleImageUpload:L},data:function(){return{activeName:"info",tableData:[],search:{},page:{},infoListApi:"/apis/adminApi/volunteer/list",approvalListApi:"/apis/adminApi/volunteer/auditList",genderOptions:[{label:"男",value:1},{label:"女",value:2}],form:{id:"",name:"",sex:"",nation:"",birthdate:"",mobile:"",idCardNumber:"",nativePlace:"",politicalStatus:"",career:"",description:"",photo:"",activityTitle:"",status:""},editing:!1,isUpdate:!1,editingRow:{},rules:{}}},computed:{currentListApi:function(){return"info"==this.activeName?this.infoListApi:this.approvalListApi},showApprovalButton:function(){return 1==this.editingRow.status},dialogTitle:function(){return"info"==this.activeName?this.isUpdate?"编辑":"添加":"详情"}},methods:{tabSwitch:function(e,t){this.search={},this.fetchList(1)},add:function(){this.editing=!0,this.isUpdate=!1,this.form={userType:1}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此志愿者吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/adminApi/volunteer/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={userType:1}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get(this.currentListApi,{params:s()({pageSize:10,pageNum:1},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.post("/apis/adminApi/user/addOrUpdateForChild",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={userType:1},e.fetchList(),e.editing=!1})})},operation:function(e,t){var a=this;this.$http.post("/apis/adminApi/volunteer/audit",{id:e,status:t}).then(function(e){a.$message({message:e.data.message,type:"success"}),a.fetchList(1)}),this.editing=!1},showOperationButton:function(e){return"approval"==this.activeName&&1==e}},mounted:function(){this.fetchList(1)}},nt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tabs",{on:{"tab-click":e.tabSwitch},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"信息列表",name:"info"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"审核列表",name:"approval"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:17}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"name"}},[a("el-input",{attrs:{placeholder:"按姓名搜索"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"按手机号搜索"},model:{value:e.search.mobile,callback:function(t){e.$set(e.search,"mobile",t)},expression:"search.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"activeTitle"}},[a("el-input",{attrs:{placeholder:"按活动搜索"},model:{value:e.search.activeTitle,callback:function(t){e.$set(e.search,"activeTitle",t)},expression:"search.activeTitle"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchList(1)}}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},["info"==e.activeName?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")]):e._e()],1)])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nation",align:"center",label:"民族"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"activityTitle",align:"center",label:"活动"}}),e._v(" "),a("el-table-column",{attrs:{prop:"politicalStatus",align:"center",label:"政治面貌"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["approval"==e.activeName?a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(){e.edit(t.row)}}},[e._v("详情")]):e._e(),e._v(" "),e.showOperationButton(t.row.status)?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(){e.operation(t.row.id,1)}}},[e._v("通过")]):e._e(),e._v(" "),e.showOperationButton(t.row.status)?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(){e.operation(t.row.id,2)}}},[e._v("不通过")]):e._e(),e._v(" "),"info"==e.activeName?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"info"==e.activeName?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.dialogTitle,visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.genderOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"民族",prop:"nation"}},[a("el-input",{model:{value:e.form.nation,callback:function(t){e.$set(e.form,"nation",t)},expression:"form.nation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生年月",prop:"birthdate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"出生年月"},model:{value:e.form.birthdate,callback:function(t){e.$set(e.form,"birthdate",t)},expression:"form.birthdate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动",prop:"activeTitle"}},[a("el-input",{model:{value:e.form.activityTitle,callback:function(t){e.$set(e.form,"activityTitle",t)},expression:"form.activityTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCardNumber"}},[a("el-input",{model:{value:e.form.idCardNumber,callback:function(t){e.$set(e.form,"idCardNumber",t)},expression:"form.idCardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"籍贯",prop:"nativePlace"}},[a("el-input",{model:{value:e.form.nativePlace,callback:function(t){e.$set(e.form,"nativePlace",t)},expression:"form.nativePlace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"政治面貌",prop:"politicalStatus"}},[a("el-input",{model:{value:e.form.politicalStatus,callback:function(t){e.$set(e.form,"politicalStatus",t)},expression:"form.politicalStatus"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职业",prop:"career"}},[a("el-input",{model:{value:e.form.career,callback:function(t){e.$set(e.form,"career",t)},expression:"form.career"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"",prop:"photo","label-width":"20px"}},[a("single-image-upload",{attrs:{width:"150",height:"250"},model:{value:e.form.photo,callback:function(t){e.$set(e.form,"photo",t)},expression:"form.photo"}}),e._v(" "),a("section",[e._v("个人一寸照片")])],1)],1)],1),e._v(" "),a("el-form-item",["info"==e.activeName?a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]):e._e(),e._v(" "),e.showApprovalButton?a("el-button",{staticClass:"el-button--success",on:{click:function(t){return e.operation(e.form.id,1)}}},[e._v("通过")]):e._e(),e._v(" "),e.showApprovalButton?a("el-button",{staticClass:"el-button--danger",on:{click:function(t){return e.operation(e.form.id,2)}}},[e._v("不通过")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var ot=a("VU/8")(it,nt,!1,function(e){a("+G/9")},"data-v-531ca09e",null).exports,rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card home-container"},e._l(e.list,function(t){return a("div",{key:t.title,staticClass:"item"},[a("div",{staticClass:"card-value"},[a("strong",[e._v(e._s(t.value))])]),e._v(" "),a("div",{staticClass:"card-title"},[e._v(e._s(t.title))])])}),0)],1)},staticRenderFns:[]};var lt=a("VU/8")({name:"Brain",data:function(){return{list:[{title:"最近调用时间2020-07-21 14:00",value:"驿站信息"},{title:"最近调用时间2020-07-21 14:02",value:"老人信息"},{title:"最近调用时间2020-07-21 14:03",value:"社工信息"},{title:"最近调用时间2020-07-21 14:04",value:"服务数据"},{title:"最近调用时间2020-07-21 14:05",value:"老人围栏报警"}]}}},rt,!1,function(e){a("/Lry")},"data-v-053d26ea",null).exports,st={name:"ElectronicFence",components:{Amap:re.a,lazyAMapApiLoaderInstance:oe.lazyAMapApiLoaderInstance},data:function(){return{mapInstance:"",map:{lng:"117.202561",lat:"36.63252",width:"400px",height:"200px",zoom:16,markers:[]},tableData:[],editing:!1,isUpdate:!1,rules:{},page:{},search:{},editingRow:{},form:{id:"",name:"",mobile:"",latestPositionReportedAt:"",movement:"",address:""}}},methods:{statusFormatter:function(e){return e.status&&1==e.status?"进入围栏":"离开围栏"},add:function(){this.editing=!0,this.isUpdate=!1,this.form={}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e),this.markers=e.movement,this.mapInit()},mapInit:function(){var e=this;re.a.initAMapApiLoader({key:"e026d6af144d5a75ed717f7c18f10fff",plugin:["AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.CircleMarker","AMap.Marker"],v:"1.4.4"}),oe.lazyAMapApiLoaderInstance.load().then(function(){e.mapInstance=new AMap.Map("a-map-container",{center:new AMap.LngLat(e.map.lng,e.map.lat),zoom:14}),e.mapInstance.on("mapmove",e.centerChanged),e.markers&&e.markers.length>0&&e.markersInit(AMap)})},markersInit:function(e){var t=this,a=[];this.markers.forEach(function(i){a.push(new e.LngLat(i.lng,i.lat)),new e.CircleMarker({map:t.mapInstance,center:new e.LngLat(i.lng,i.lat),radius:10,strokeColor:"#4169E1",fillColor:"#4169E1",zIndex:55})});this.mapInstance.setFitView();var i=new e.Polyline({path:a,strokeColor:"#EEC900",fillColor:"#EEC900",lineCap:"round",lineJoin:"round",showDir:!0,strokeWeight:5});this.mapInstance.add([i])},cancel:function(){this.editing=!1,console.log(this.mapInstance),this.mapInstance.destroy()},fetchList:function(){var e=this;this.$http.get("http://rap2.taobao.org:38080/app/mock/262326/adminApi/electronic/fence",{params:s()({pageSize:10,pageNum:1},this.search)}).then(function(t){e.page.total=t.data.data.total,e.search.pageNum=parseInt(t.data.data.pageNum),e.tableData=t.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.roleId=e.form.roleName,e.$http.post("/apis/adminApi/badge/addOrUpdate",e.form).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={},e.fetchList(),e.editing=!1})})}},mounted:function(){this.fetchList(1)}},ct={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"name"}},[a("el-input",{attrs:{placeholder:"按老人姓名搜索"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchList}},[e._v("搜索")])],1)],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"老人姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"时间类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{staticStyle:{float:"left"},attrs:{span:12}},[a("div",{staticStyle:{float:"right"}},[e._v(e._s(e.statusFormatter(t.row)))])]),e._v(" "),a("el-col",{attrs:{span:12}},[2==t.row.status?a("div",{staticStyle:{"margin-left":"20px",width:"20px",height:"20px",border:"solid 1px red","background-color":"red","border-radius":"10px"}}):e._e(),e._v(" "),1==t.row.status?a("div",{staticStyle:{"margin-left":"20px",width:"20px",height:"20px",border:"solid 1px limegreen","background-color":"limegreen","border-radius":"10px"}}):e._e()])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmingTime",align:"center",label:"报警时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(){e.edit(t.row)}}},[e._v("行动轨迹")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"行动轨迹",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"150px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"老人姓名",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"老人手机号",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"家庭住址",prop:"address"}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"最近位置上报时间",prop:"latestPositionReportedAt"}},[a("el-input",{model:{value:e.form.latestPositionReportedAt,callback:function(t){e.$set(e.form,"latestPositionReportedAt",t)},expression:"form.latestPositionReportedAt"}})],1),e._v(" "),a("el-form-item",[a("section",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"a-map-container"}})]),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var mt=a("VU/8")(st,ct,!1,function(e){a("O/4/")},"data-v-4ef2f5be",null).exports,dt=a("63pp"),pt=(a("g3Gj"),{name:"VideoPlayer",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{player:null}},mounted:function(){console.log(111,this.options),this.player=Object(dt.a)(this.$refs.videoPlayer,this.options,function(){console.log(222)})},beforeDestroy:function(){this.player&&this.player.dispose()}}),ut={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("video",{ref:"videoPlayer",staticClass:"video-js"},[t("source",{attrs:{src:"http://192.168.1.6:8080/video",type:"video/mp4"}}),this._v(" "),this._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"vjs-no-js"},[this._v("To view this video please enable JavaScript, and consider upgrading to a web browser that "),t("a",{attrs:{href:"https://videojs.com/html5-video-support/",target:"_blank"}},[this._v("supports HTML5 video")])])}]};var ft={name:"Monitor",components:{VideoPlayer:a("VU/8")(pt,ut,!1,function(e){a("e13J")},"data-v-4ce3c472",null).exports},data:function(){return{editorOption:{placeholder:""},defaultProps:{children:"children",label:"label"},oldManInVillage:[],options:{language:"zh-CN",height:300,width:300,autoplay:!0,controls:!0,sources:[],children:{controlBar:{}}}}},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},fetchList:function(){var e=this;this.$http.get("http://rap2.taobao.org:38080/app/mock/262326/adminApi/stage/monitor").then(function(t){e.oldManInVillage=t.data.data})}},mounted:function(){this.fetchList()}},ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{staticClass:"container",attrs:{span:5}},[a("section",[e._v("\n            魏善庄镇驿站监控\n        ")]),e._v(" "),a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.oldManInVillage,props:e.defaultProps,"filter-node-method":e.filterNode,"default-expand-all":!0}})],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v(" ")]),e._v(" "),a("el-col",{staticClass:"container",attrs:{span:18}},[a("img",{attrs:{src:"http://192.168.1.6:8080/video",alt:"",width:"200px"}})])],1)},staticRenderFns:[]};var vt=a("VU/8")(ft,ht,!1,function(e){a("ntLu")},"data-v-3155905b",null).exports,gt={name:"Center",computed:{genderFormatter:function(){return 1==this.commonOrder.sex?"男":"女"}},data:function(){return{dialogButtonText:"确认派单",orderDetail:{mobile:"2343243243",name:"xxx",content:"ccccccccccc",historyOrders:[{name:"111",status:"1",orderTime:"2020-07-11",mobile:"123123123123"},{name:"111",status:"1",orderTime:"2020-07-11",mobile:"123123123123"},{name:"111",status:"1",orderTime:"2020-07-11",mobile:"123123123123"}]},doctorOrderDialog:{doctor:""},doctorOptions:[],receptionDialog:{worker:"",detail:""},serviceWorkers:[],serviceOrderDialog:{worker:""},commonOrder:{id:"",name:"",mobile:"",village:"",homeAddress:"",sex:1},activeName:"customerService",showDialog:!1,dialogTitle:"服务工单",firstTab:{oldManMobile:"",searchDate:"",oldManInfo:{},orderList:[],oldManList:[],workOrderList:[],workOrderPage:{pageNum:1,pageSize:10,total:0},list:[{title:1,text:"接待次数",total:20,self:15},{title:2,text:"派单次数",total:20,self:15},{title:3,text:"派单次数",total:20,self:15}]},searchForm:{name:"",mobile:"",createTime:""},secondTab:{historyWorkOrderList:[],historyWorkOrderPage:{pageNum:1,pageSize:10,total:0}},thirdTab:{historyReceptionList:[],historyReceptionPage:{pageNum:1,pageSize:10,total:0}},statusMap:["","已派单","已结单","服务中","已超时","服务完成"]}},methods:{sexFormatter:function(e){return 1==e.sex?"男":"女"},getServiceWorkers:function(){var e=this;this.$http.get("http://rap2.taobao.org:38080/app/mock/262326/adminApi/service/workers").then(function(t){e.serviceWorkers=t.data.data})},getDoctorOptions:function(){var e=this;this.$http.get("http://rap2.taobao.org:38080/app/mock/262326/adminApi/service/doctors").then(function(t){e.doctorOptions=t.data.data})},statusFormatter:function(e){return this.statusMap[e.status]},orderOperator:function(e,t){console.log(e,t)},serviceOrder:function(){this.showDialogController(),this.dialogTitle="服务工单",this.dialogButtonText="确认派单",this.getServiceWorkers()},doctorOrder:function(){this.showDialogController(),this.dialogButtonText="确认派单",this.dialogTitle="医生工单"},receptionRecord:function(){this.showDialogController(),this.dialogButtonText="保存",this.dialogTitle="接待记录"},orderView:function(){this.showDialogController(),this.dialogTitle="查看工单",this.dialogButtonText="确认"},showDialogController:function(){this.showDialog=!0},hideDialog:function(){this.showDialog=!1},rowStyle:function(){return{border:"solid 1px black"}},reception:function(){var e=this;console.log(this.firstTab.oldManMobile),this.firstTab.oldManMobile&&this.$http.get("http://rap2.taobao.org:38080/app/mock/262326/adminApi/getOldManByMobile",{params:{mobile:this.firstTab.oldManMobile}}).then(function(t){e.firstTab.oldManList=t.data.data.list,console.log(t.data.data.list)})},tabSwitch:function(e){console.log(this.activeName),this.searchForm={name:"",mobile:"",createTime:""},"customerService"==this.activeName?this.getWorkOrderLIst(1):"historyWorkOrder"==this.activeName?this.getHistoryWorkOrderLIst(1):"historyReception"==this.activeName&&this.getHistoryReceptionLIst(1)},getWorkOrderLIst:function(e){var t=this;this.$http.get("http://rap2.taobao.org:38080/app/mock/262326/adminApi/call/center/workOrderList",{params:{pageSize:this.firstTab.workOrderPage.pageSize,pageNum:e||1}}).then(function(e){t.firstTab.workOrderList=e.data.data.list,console.log(e.data.data),t.firstTab.workOrderPage.total=e.data.data.total,t.firstTab.workOrderPage.pageSize=e.data.data.pageSize})},getHistoryWorkOrderLIst:function(e){var t=this;this.searchForm=this.$common.searchParams(this.searchForm),this.$http.get("http://rap2.taobao.org:38080/app/mock/262326/adminApi/call/center/historyWorkOrderList",{params:s()({pageSize:this.secondTab.historyWorkOrderPage.pageSize,pageNum:e||1},this.searchForm)}).then(function(e){t.secondTab.historyWorkOrderList=e.data.data.list,t.secondTab.historyWorkOrderPage.total=e.data.data.total,t.secondTab.historyWorkOrderPage.pageSize=e.data.data.pageSize})},getHistoryReceptionLIst:function(e){var t=this;this.searchForm=this.$common.searchParams(this.searchForm),this.$http.get("http://rap2.taobao.org:38080/app/mock/262326/adminApi/call/center/historyReceptionList",{params:s()({pageSize:this.thirdTab.historyReceptionPage.pageSize,pageNum:e||1},this.searchForm)}).then(function(e){t.thirdTab.historyReceptionList=e.data.data.list,t.thirdTab.historyReceptionPage.total=e.data.data.total,t.thirdTab.historyReceptionPage.pageSize=e.data.data.pageSize})},searchList:function(){"historyWorkOrder"==this.activeName?this.getHistoryWorkOrderLIst(1):"historyReception"==this.activeName&&this.getHistoryReceptionLIst(1)}},mounted:function(){this.getWorkOrderLIst(1),this.getServiceWorkers(),this.getDoctorOptions()}},bt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",[a("div",{staticClass:"grid-content bg-purple"},[a("el-tabs",{on:{"tab-click":e.tabSwitch},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"服务坐席工作台",name:"customerService"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"历史工单列表",name:"historyWorkOrder"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"历史接待列表",name:"historyReception"}})],1)],1)])],1),e._v(" "),"customerService"!=e.activeName?a("el-row",[a("el-form",{attrs:{model:e.searchForm,inline:!0}},[a("el-input",{staticStyle:{width:"15%"},attrs:{placeholder:"老人手机号"},model:{value:e.searchForm.mobile,callback:function(t){e.$set(e.searchForm,"mobile",t)},expression:"searchForm.mobile"}}),e._v(" "),a("el-input",{staticStyle:{width:"15%"},attrs:{placeholder:"老人姓名"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}}),e._v(" "),a("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.createTime,callback:function(t){e.$set(e.searchForm,"createTime",t)},expression:"searchForm.createTime"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.searchList}},[e._v("搜索")])],1)],1):e._e(),e._v(" "),"customerService"==e.activeName?a("el-row",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form",[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.firstTab.searchDate,callback:function(t){e.$set(e.firstTab,"searchDate",t)},expression:"firstTab.searchDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-button",[e._v("本日")]),e._v(" "),a("el-button",[e._v("本周")]),e._v(" "),a("el-button",[e._v("本月")])],1)])],1),e._v(" "),a("el-row",[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 20px 20px 20px 0"}},e._l(e.firstTab.list,function(t){return a("div",{key:t.title,staticClass:"text item"},[a("div",{staticClass:"card-title"},[e._v(e._s(t.text))]),e._v(" "),a("div",{staticClass:"card-value"},[a("span",{staticClass:"number-value"},[e._v(e._s(t.self))]),a("span",{staticClass:"number-unit"},[e._v("本人")]),e._v("/"),a("span",{staticClass:"number-value"},[e._v(e._s(t.total))]),a("span",{staticClass:"number-unit"},[e._v("总计")])]),e._v(" "),1==t.title?a("div",{staticClass:"bottom-text"},[e._v("接单详情")]):e._e(),e._v(" "),3==t.title?a("div",{staticClass:"bottom-text"},[e._v("历史工单列表")]):e._e()])}),0)],1),e._v(" "),a("el-row",{staticStyle:{height:"200px"}},[a("el-form",{staticClass:"search-form"},[a("el-input",{staticStyle:{width:"20%"},attrs:{placeholder:"老人手机号"},model:{value:e.firstTab.oldManMobile,callback:function(t){e.$set(e.firstTab,"oldManMobile",t)},expression:"firstTab.oldManMobile"}}),e._v(" "),a("el-button",{on:{click:e.reception}},[e._v("接待")])],1)],1),e._v(" "),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.firstTab.oldManList}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nation",label:"民族",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",align:"center",formatter:e.sexFormatter,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardNumber",align:"center",label:"身份证号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",align:"center",label:"年龄"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{float:"left"}},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"mini"},on:{click:function(){e.serviceOrder(t.row)}}},[e._v("服务工单")]),e._v(" "),a("el-button",{staticStyle:{margin:"10px 0 0 0"},attrs:{type:"primary",size:"mini"},on:{click:function(){e.doctorOrder(t.row)}}},[e._v("医生工单")]),e._v(" "),a("el-button",{staticStyle:{margin:"10px 0 0 0"},attrs:{type:"primary",size:"mini"},on:{click:function(){e.receptionRecord(t.row)}}},[e._v("接待记录")])],1)]}}],null,!1,1877934501)})],1)],1),e._v(" "),a("el-row",[a("section",[a("h3",[e._v("工单列表")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.firstTab.workOrderList}},[a("el-table-column",{attrs:{type:"index",width:"150",label:"工单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderTime",label:"下单时间",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结单时间",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",formatter:e.statusFormatter,label:"工单状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{float:"left"}},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"mini"},on:{click:function(){e.orderView(t.row)}}},[e._v("查看工单")]),e._v(" "),2!=t.row.status?a("el-button",{staticStyle:{margin:"10px 0 0 0"},attrs:{type:"primary",size:"mini"},on:{click:function(){e.orderOperator(t.row,2)}}},[e._v("结束工单")]):e._e()],1)]}}],null,!1,1710003409)})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.firstTab.workOrderPage.pageSize,total:this.firstTab.workOrderPage.total,"current-page":this.firstTab.workOrderPage.pageNum},on:{"current-change":e.getWorkOrderLIst}})],1)],1):e._e(),e._v(" "),"historyWorkOrder"==e.activeName?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.secondTab.historyWorkOrderList,"highlight-current-row":!0,"row-style":e.rowStyle}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nation",label:"民族",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",align:"center",formatter:e.sexFormatter,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardNumber",align:"center",label:"身份证号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",align:"center",label:"年龄"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{float:"left"}},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"mini"},on:{click:function(){e.serviceOrder(t.row)}}},[e._v("服务工单")]),e._v(" "),a("el-button",{staticStyle:{margin:"10px 0 0 0"},attrs:{type:"primary",size:"mini"},on:{click:function(){e.doctorOrder(t.row)}}},[e._v("医生工单")]),e._v(" "),a("el-button",{staticStyle:{margin:"10px 0 0 0"},attrs:{type:"primary",size:"mini"},on:{click:function(){e.receptionRecord(t.row)}}},[e._v("接待记录")])],1)]}}],null,!1,1877934501)})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.secondTab.historyWorkOrderPage.pageSize,total:this.secondTab.historyWorkOrderPage.total,"current-page":this.secondTab.historyWorkOrderPage.pageNum},on:{"current-change":e.getHistoryWorkOrderLIst}})],1):e._e(),e._v(" "),"historyReception"==e.activeName?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.thirdTab.historyReceptionList,"highlight-current-row":!0,"row-style":e.rowStyle}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nation",label:"民族",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",align:"center",formatter:e.sexFormatter,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardNumber",align:"center",label:"身份证号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",align:"center",label:"年龄"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{float:"left"}},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"mini"},on:{click:function(){e.orderView(t.row)}}},[e._v("查看工单")])],1)]}}],null,!1,3955957945)})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.thirdTab.historyReceptionPage.pageSize,total:this.thirdTab.historyReceptionPage.total,"current-page":this.thirdTab.historyReceptionPage.pageNum},on:{"current-change":e.getHistoryReceptionLIst}})],1):e._e(),e._v(" "),a("el-dialog",{staticStyle:{height:"auto"},attrs:{"close-on-click-modal":!1,title:e.dialogTitle,visible:e.showDialog,"append-to-body":!0},on:{"update:visible":function(t){e.showDialog=t}}},[a("el-form",{attrs:{model:e.commonOrder,"label-width":"100px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.commonOrder.id,expression:"commonOrder.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.commonOrder.id,callback:function(t){e.$set(e.commonOrder,"id",t)},expression:"commonOrder.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"老人姓名",prop:"name"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.commonOrder.name,callback:function(t){e.$set(e.commonOrder,"name",t)},expression:"commonOrder.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.genderFormatter,callback:function(t){e.genderFormatter=t},expression:"genderFormatter"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.commonOrder.mobile,callback:function(t){e.$set(e.commonOrder,"mobile",t)},expression:"commonOrder.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在村庄",prop:"village"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.commonOrder.village,callback:function(t){e.$set(e.commonOrder,"village",t)},expression:"commonOrder.village"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细家庭住址",prop:"homeAddress"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.commonOrder.homeAddress,callback:function(t){e.$set(e.commonOrder,"homeAddress",t)},expression:"commonOrder.homeAddress"}})],1),e._v(" "),"服务工单"==e.dialogTitle?a("el-form-item",{attrs:{prop:"worker",label:"选择社工"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serviceOrderDialog.worker,callback:function(t){e.$set(e.serviceOrderDialog,"worker",t)},expression:"serviceOrderDialog.worker"}},e._l(e.serviceWorkers,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),e._v(" "),"接待记录"==e.dialogTitle?a("el-form-item",{attrs:{prop:"worker",label:"选择社工"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.receptionDialog.worker,callback:function(t){e.$set(e.receptionDialog,"worker",t)},expression:"receptionDialog.worker"}},e._l(e.serviceWorkers,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),e._v(" "),"接待记录"==e.dialogTitle?a("el-form-item",{attrs:{prop:"worker",label:"接待详情"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.receptionDialog.detail,callback:function(t){e.$set(e.receptionDialog,"detail",t)},expression:"receptionDialog.detail"}})],1):e._e(),e._v(" "),"医生工单"==e.dialogTitle?a("el-form-item",{attrs:{prop:"docktor",label:"选择医生"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.doctorOrderDialog.doctor,callback:function(t){e.$set(e.doctorOrderDialog,"doctor",t)},expression:"doctorOrderDialog.doctor"}},e._l(e.doctorOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),e._v(" "),"查看工单"==e.dialogTitle?a("el-form-item",{attrs:{prop:"",label:"历史派单"}},[a("el-table",{attrs:{data:e.orderDetail.historyOrders}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderTime",align:"center",label:"下单时间"}})],1)],1):e._e(),e._v(" "),"查看工单"==e.dialogTitle?a("el-form-item",{attrs:{prop:"mobile",label:"驿工手机号"}},[a("el-input",{model:{value:e.orderDetail.mobile,callback:function(t){e.$set(e.orderDetail,"mobile",t)},expression:"orderDetail.mobile"}})],1):e._e(),e._v(" "),"查看工单"==e.dialogTitle?a("el-form-item",{attrs:{prop:"content",label:"历史派单"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.orderDetail.content,callback:function(t){e.$set(e.orderDetail,"content",t)},expression:"orderDetail.content"}})],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"}},[e._v(e._s(e.dialogButtonText))])],1)],1)],1)],1)},staticRenderFns:[]};var _t=a("VU/8")(gt,bt,!1,function(e){a("6O8y")},"data-v-40a4f7f2",null).exports,yt={name:"ServiceBanner",components:{SingleImageUpload:L,Editor:I},data:function(){return{editorOption:{placeholder:""},tableData:[],page:{pageSize:10},editingRow:{},form:{id:"",name:"",pic:"",link:"",text:"",type:3,createTime:"",updateTime:""},editing:!1,isUpdate:!1,search:{},rules:{text:[{required:!0,message:"请输入轮播图内容描述",trigger:"blur"},{min:2,max:100,message:"长度在 2 到 100 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入轮播图链接地址",trigger:"blur"},{type:"url",message:"请输入有效的链接地址",trigger:"blur"}],pic:[{required:!0,message:"请上传轮播图片"}],name:[{required:!0,message:"请输入轮播图名称"}]}}},methods:{add:function(){this.editing=!0,this.isUpdate=!1,this.form={type:3}},edit:function(e){this.editing=!0,this.isUpdate=!0,this.editingRow=e,this.form=s()({},e)},remove:function(e){var t=this;this.$confirm("确定删除此轮播图吗？","提示",{type:"warning"}).then(function(){t.$http.post("/apis/banner/delete",{id:e}).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchList(1)}),t.editing=!1,t.form={type:3}}).catch(function(){})},cancel:function(){this.editing=!1},fetchList:function(e){var t=this;this.search.pageNum=e||this.search.pageNum,this.$http.get("/apis/banner/list",{params:s()({pageSize:10,pageNum:1,type:this.form.type,token:localStorage.getItem("auth-token")},this.search)},{params:this.search}).then(function(e){t.page.total=e.data.data.total,t.search.pageNum=parseInt(e.data.data.pageNum),t.tableData=e.data.data.list,t.page.total=e.data.data.total,t.tableData=e.data.data.list})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.$http.post("/apis/banner/AddOrUpdate",e.form,{params:{token:localStorage.getItem("auth-token")}}).then(function(t){e.$message({message:t.data.message,type:"success"}),e.form={type:3},e.fetchList(1),e.editing=!1})})}},mounted:function(){this.fetchList(1)}},kt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"header-bar"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),[a("div",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{fit:"contain",src:"/images/"+e.row.pic}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"link",align:"center",label:"链接"}}),e._v(" "),a("el-table-column",{attrs:{prop:"text",align:"center",label:"文本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"total, prev, pager, next","page-size":this.page.pageSize,total:this.page.total,"current-page":this.search.pageNum},on:{"current-change":e.fetchList}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isUpdate?"修改":"添加",visible:e.editing,"append-to-body":!0},on:{"update:visible":function(t){e.editing=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("el-input",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"pic"}},[a("single-image-upload",{attrs:{width:"400",height:"200"},model:{value:e.form.pic,callback:function(t){e.$set(e.form,"pic",t)},expression:"form.pic"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"链接",prop:"link"}},[a("el-input",{model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文本",prop:"text"}},[a("editor",{ref:"myTextEditor",attrs:{options:e.editorOption},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)]],2)},staticRenderFns:[]};var xt=a("VU/8")(yt,kt,!1,function(e){a("zT+R")},"data-v-12b00867",null).exports;i.default.use(r.a);var wt=new r.a({routes:[{path:"/",component:v,meta:{title:"首页"},children:[{path:"/",meta:{title:"首页"},component:b},{path:"/app/service-banner",meta:{title:"服务轮播图"},component:R},{path:"/app/index-banner",meta:{title:"首页轮播图"},component:xt},{path:"/app/community-banner",meta:{title:"社区轮播图"},component:B},{path:"/system/administration",meta:{title:"管理员"},component:W},{path:"/community/category",meta:{title:"社区分类"},component:j},{path:"/community/info",meta:{title:"社区信息列表"},component:J},{path:"/store/category",meta:{title:"商家分类"},component:Q},{path:"/store",meta:{title:"商家信息列表"},component:ne},{path:"/village",meta:{title:"村庄管理"},component:ce},{path:"/comment/store",meta:{title:"商家评价"},component:pe},{path:"/comment/community",meta:{title:"社区评价"},component:he},{path:"/care/template",meta:{title:"关怀管理"},component:be},{path:"/care/birthday",meta:{title:"生日祝福"},component:ke},{path:"/health/commonSense",meta:{title:"健康常识"},component:$e},{path:"/user/children",meta:{title:"子女信息"},component:Ce},{path:"/user/elders",meta:{title:"老人信息列表"},component:Ae},{path:"/user/elderFile",meta:{title:"老人档案"},component:Ue},{path:"/user/stage",meta:{title:"驿站管理"},component:Ee},{path:"/user/doctor",meta:{title:"医生管理"},component:Ve},{path:"/user/social-worker",meta:{title:"社工管理"},component:He},{path:"/city/brain",meta:{title:"城市大脑"},component:lt},{path:"/statistics",meta:{title:"统计分析"},component:Ze},{path:"/chest/card",meta:{title:"胸牌管理"},component:ze},{path:"/volunteer/activity",meta:{title:"活动管理"},component:at},{path:"/volunteer/approval",meta:{title:"审核列表"},component:ot},{path:"/electronic/fence",meta:{title:"电子围栏"},component:mt},{path:"/stage/monitor",meta:{title:"驿站监控"},component:vt},{path:"/call/center",meta:{title:"呼叫中心"},component:_t},{path:"404",meta:{noBorder:!0,title:"页面找不到"},component:y}]},{path:"/login",meta:{title:"登录"},component:S},{path:"*",redirect:"/"}]}),$t=a("//Fk"),St=a.n($t),Nt=a("mtWM"),Ct=a.n(Nt),Lt=a("zL8q"),Tt=a.n(Lt);Ct.a.defaults.timeout=3e4,Ct.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",Ct.a.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded",Ct.a.defaults.transformRequest=[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],Ct.a.interceptors.request.use(function(e){return localStorage.getItem("auth-token")&&(e.headers.token=localStorage.getItem("auth-token")),e},function(e){return St.a.reject(e)}),Ct.a.interceptors.response.use(function(e){return 200===e.status?0==e.data.code?e:419===e.data.code||403===e.data.code||5002===e.data.code||5001===e.data.code?(Lt.Message.error({message:"登录超时，请重新登录",duration:1500,onClose:function(){location.href="/"}}),localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user-info"),localStorage.removeItem("auth-username"),St.a.reject("Response code is : "+e.data.code+", message is : "+e.data.msg)):(Lt.Message.error(e.data.msg),console.log(e.data),St.a.reject("Response code is : "+e.data.code+", message is : "+e.data.msg)):(Lt.Message.error("请求失败，服务端状态码："+e.status),St.a.reject("Http response code is "+e.status))},function(e){return Lt.Message.error("服务端错误："+e),St.a.reject(e)});var At=Ct.a,Ot=(a("tvR6"),function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a){var n=a[i];new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n:("00"+n).substr((""+n).length)))}return t}),Mt=function(e){for(var t in e)"createTime"==t&&(e.timeStart=e.createTime[0],e.timeEnd=e.createTime[1],delete e.createTime),e[t]||delete e[t];return e};i.default.prototype.$http=At,i.default.use(Tt.a),i.default.use(function(e){e.prototype.$common={format:Ot,searchParams:Mt}}),i.default.config.productionTip=!1,wt.beforeEach(function(e,t,a){document.title=e.meta.title+" | 魏善庄智慧养老院";var n=localStorage.getItem("auth-user-info");n||"/login"===e.path?e.meta.permission?"admin"===n?a():a("/403"):navigator.userAgent.indexOf("MSIE")>-1&&"/editor"===e.path?i.default.prototype.$alert("vue-quill-editor组件不兼容IE10及以下浏览器，请使用更高版本的浏览器查看","浏览器不兼容通知",{confirmButtonText:"确定"}):a():a("/login")}),new i.default({el:"#app",router:wt,components:{App:o},template:"<App/>"})},"O/4/":function(e,t){},"O6e/":function(e,t){},POom:function(e,t){},Q7lB:function(e,t){},TqcE:function(e,t){},UFHR:function(e,t){},afqh:function(e,t){},boWN:function(e,t){},c4lA:function(e,t){},dRa4:function(e,t){},dTDY:function(e,t){},e13J:function(e,t){},g3Gj:function(e,t){},gH79:function(e,t){},jfdR:function(e,t){},ntLu:function(e,t){},oI3x:function(e,t){},"rY/e":function(e,t){},tCKW:function(e,t){},tvR6:function(e,t){},uym3:function(e,t){},"zT+R":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a4e41ce13838d9d6870e.js.map